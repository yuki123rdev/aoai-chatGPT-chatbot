<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial/3DSecure2/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">3D Secure 2 - Overview | Rakuten Payment Platform Documentation Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.payment.global.rakuten.com/guides/3dsecure2/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="3D Secure 2 Implementation | Rakuten Payment Platform Documentation Portal"><meta data-rh="true" name="description" content="This API sends a 3D Secure authentication request and supports 3D Secure 2.0 with NTT Data as a 3DS authentication service provider."><meta data-rh="true" property="og:description" content="This API sends a 3D Secure authentication request and supports 3D Secure 2.0 with NTT Data as a 3DS authentication service provider."><link data-rh="true" rel="icon" href="/img/logoR.png"><link data-rh="true" rel="canonical" href="https://docs.payment.global.rakuten.com/guides/3dsecure2/"><link data-rh="true" rel="alternate" href="https://docs.payment.global.rakuten.com/guides/3dsecure2/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.payment.global.rakuten.com/ja/guides/3dsecure2/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://docs.payment.global.rakuten.com/guides/3dsecure2/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HRVS4580AM-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/release-note-blog/rss.xml" title="Rakuten Payment Platform Documentation Portal RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/release-note-blog/atom.xml" title="Rakuten Payment Platform Documentation Portal Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RE7H19L577"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RE7H19L577",{anonymize_ip:!0})</script>












<link rel="search" type="application/opensearchdescription+xml" title="Rakuten Payment Platform Documentation Portal" href="/opensearch.xml">




<link rel="stylesheet" href="/vendor/bootstrap/css/bootstrap.min-ec3bb52a00e176a7181d454dffaea219.css">
<link rel="stylesheet" href="/vendor/metisMenu/css/metisMenu.min-bb3f6f86f3feb94b2ba7b43c9d315c54.css">
<link rel="stylesheet" href="/css/developer_tool-c89ff5e2e123a5655767d765e09d1f73.css">
<link rel="stylesheet" href="/css/loader-14604e38937c8d26ac916bf28f2a9f9b.css">
<link rel="stylesheet" href="/css/webportal-4d03e6d97e3053f274e2592b8d9b57656cbd3555.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jotted@latest/jotted.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer="defer"></script>
<script src="https://cdn.jsdelivr.net/npm/jotted@latest/jotted.min.js" defer="defer"></script>
<script src="/vendor/bootstrap/js/bootstrap.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js" defer="defer"></script>
<script src="/js/jquery-dateFormat.min-95766bbf0f6b9ef23609620a13d09777.js" defer="defer"></script>
<script src="/js/devtool-common-9dea6bf50ccb01e308540d56d8b874f2.js" defer="defer"></script>
<script src="/js/hmac-sha256-e355334677dcf7e7b062c1e1aff8e36d.js" defer="defer"></script>
<script src="/js/base64-ae4086f4bc9b991b8ac94e25878e29b9.js" defer="defer"></script>
<script src="/js/aes-d57c122164557ff2dca90400c4744648.js" defer="defer"></script>
<script src="/js/dialog-9d47d91af9f0a88581e24b4d9f4e1cb1.js" defer="defer"></script>
<script src="/js/devtool-submit-862a00f15d42f9e8518c299469c19ef6.js" defer="defer"></script>
<script src="/js/devtool-authorize-771a0bdbc9b763daf235ecd6920116d5.js" defer="defer"></script>
<script src="/js/devtool-authorizecapture-617244bc322de2914aa86f13dbffebaf.js" defer="defer"></script>
<script src="/js/devtool-capture-d6ce015f67d7d8449f77e86f43dc532e.js" defer="defer"></script>
<script src="/js/devtool-cancelRefund-a49c18f1d89ca83450f8e705e0e7a6c3.js" defer="defer"></script>
<script src="/js/devtool-partialrefund-c88324e6562658a68361c3934d0aa98c.js" defer="defer"></script>
<script src="/js/devtool-find-f2e6910b7c01bddeacd7e8d5148eb041.js" defer="defer"></script>
<script src="/js/devtool-modify-0dd4b07cec2d1a7a111d8b3c024423aa.js" defer="defer"></script>
<script src="/js/encrypt-decrypt-tool-6a519772f0093588b32923ebf96ddf29.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.0e845cde.css">
<script src="/assets/js/runtime~main.aa8ddc73.js" defer="defer"></script>
<script src="/assets/js/main.56c25086.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="headerSub relative flex text-xs items-center justify-between sm:h-8 lg:justify-start" aria-label="Global"><div class="hidden w-full md:flex md:ml-5 md:pr-5 md:space-x-5"><a href="https://payment.rakuten.co.jp/" class="hidden font-medium text-gray-500 hover:text-gray-900">Rakuten Payment</a><a href="https://global.rakuten.com/corp/" class="hidden font-medium text-gray-500 hover:text-gray-900">Rakuten Group</a><a href="/logout/" style="margin-left:auto" class="btnLogin inline-block font-medium text-sky-500 hover:text-white hover:bg-sky-500 px-2 mr-5 border-sky-500 border-2">Log out</a></div></div><div class="relative flex text-xs items-center justify-between sm:h-8 lg:justify-start" aria-label="Global"><div class="hidden w-full md:flex md:ml-5 md:pr-5 md:space-x-5"><img class="h-6" src="/img/logoR.svg" alt=""><div class="nameSiteTitle font-serif h-8 text-base font-bold uppercase"><span>Rakuten Payment Platform Documentation Portal</span></div></div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Home</b></a><a class="navbar__item navbar__link" href="/guides/intro/card/">Guides</a><a class="navbar__item navbar__link" href="/products/api-reference/">Products</a><a class="navbar__item navbar__link" href="/release-note-blog/">Release notes</a><a class="navbar__item navbar__link" href="/release-notes/">Release notes</a><a class="navbar__item navbar__link" href="/support/">Support</a><a class="navbar__item navbar__link" href="/faq/dashboard/">FAQ</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/guides/3dsecure2/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/ja/guides/3dsecure2/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><b>Home</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/product/">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/intro/card/">Development Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/products/pgw3/">Products&amp;APIs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/pgw3/">Payment Gateway API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/payvault/">PayVault JS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/cvs_specifications/">CVS Payment API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/rakutenpay/">Rakuten Pay API</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/paymentstep/">Page Not Found</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/cardupdater_specifications/">Page Not Found</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/bulkcapture/">Page Not Found</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/paymentstepcreateurlspec/">Payment Step Create URL API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/payvault/">PayVault API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/common-specifications/api-common/">Common Specifications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/api-reference/pgw3/">Payment Gateway API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/guides/3dsecure2/">3D Secure 2.0</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/3dsecure2/">3D Secure 2 Implementation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/3dsecure2/htmlapiguideline/">3DS2.0 - HTML API Guideline on STG Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/3dsecure2/challenge_authentication/">Challenge Authentication</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/guides/3dsecure2/migration_guidelines/">3DS2.0 Migration - Migration Guidelines</a><button aria-label="Expand sidebar category &#x27;3DS2.0 Migration - Migration Guidelines&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/payvault/">PayVault</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/infovault-implementation-guideline/">InfoVault</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/paymentstep/paymentstep_integrationguide/">Payment Step</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/BulkCapture/authorize/">Bulk Capture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/TestInformation/under/">Test Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/cardupdater/card-expiration-date-validation-rule/">Card Updater</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/Remittance_Gateway/">Remittance Gateway</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/library/">Playground</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/cardpayment_testguideline/">Testing Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/sellerportal_introduction/">Seller Portal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/faq/dashboard/">FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/release-note-blog/">Release Notes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/release-notes/">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/support/">Support Desk</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/support/">Support</a><button aria-label="Expand sidebar category &#x27;Support&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Products&amp;APIs</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">3D Secure 2.0</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">3D Secure 2 Implementation</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>3D Secure 2 Implementation</h1></header>
<div class="tableOfContentsInline_prmo"><ul class="table-of-contents"><li><a href="#apiTitleName">3DSecureEnrollment/V2/Check</a></li><li><a href="#purpose">Purpose</a></li><li><a href="#call-flow">Call Flow</a><ul><li><a href="#iframe-basis-authentication-under-construction">iframe-basis authentication (<font>under-construction</font>)</a></li></ul></li><li><a href="#supported-psp">Supported PSP</a></li><li><a href="#api-endpoint">API Endpoint</a></li><li><a href="#request-data">Request Data</a><ul><li><a href="#http-method">HTTP Method</a></li><li><a href="#request-header">Request Header</a></li><li><a href="#request-parameters">Request Parameters</a></li><li><a href="#request-data-1">Request Data</a></li></ul></li><li><a href="#13-response-data-of-phase-1-before-redirection">(1/3) Response Data of Phase 1 (Before redirection)</a></li><li><a href="#1-3d-secure-verification-status">(*1) 3D Secure Verification Status</a></li><li><a href="#sample-response-data">Sample Response Data</a><ul><li><a href="#failure-invalid_request_parameter">FAILURE (invalid_request_parameter)</a></li></ul></li><li><a href="#23-response-data-of-phase-2-after-redirection">(2/3) Response Data of Phase 2 (After redirection)</a></li><li><a href="#1-3d-secure-verification-status-1">(*1) 3D Secure Verification Status</a></li><li><a href="#response-header">Response Header</a></li><li><a href="#response-parameter">Response Parameter</a></li><li><a href="#sample-response-data-1">Sample Response Data</a></li><li><a href="#authentication-timeout">Authentication Timeout</a></li><li><a href="#33-call-authorize-authorizeandcapture-with-authentication-result">(3/3) Call Authorize, AuthorizeAndCapture with Authentication Result</a><ul><li><a href="#sample-of-request-data-for-authorize">Sample of Request Data for Authorize</a></li></ul></li><li><a href="#document">Document</a></li><li><a href="#3ds20_qa">3DS2.0_Q&amp;A</a><ul><li><a href="#q-which--params-to-keep-in-clients-db">Q: Which  params to keep in Clients DB?</a></li></ul></li></ul></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="apiTitleName">3DSecureEnrollment/V2/Check<a href="#apiTitleName" class="hash-link" aria-label="Direct link to 3DSecureEnrollment/V2/Check" title="Direct link to 3DSecureEnrollment/V2/Check">​</a></h2>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="purpose">Purpose<a href="#purpose" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h2>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span></div><div class="admonitionContent_BuS1"><font color="red">This API is for requesting 3DS2 authentication to NTTData.</font><br><font color="red">The authentication result can be used for the supported PSPs (such as RakutenCard) on Authorization request.</font></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>What&#x27;s new for /3DSecureEnrollment/V2/Check?</div><div class="admonitionContent_BuS1"><ol>
<li>
<font color="red">Added required and optional fields to support 3D Secure 2 authentication processing via NTT Data.</font>
</li>
<li>
<font color="red">Required Key Versioning</font>
</li>
</ol></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="call-flow">Call Flow<a href="#call-flow" class="hash-link" aria-label="Direct link to Call Flow" title="Direct link to Call Flow">​</a></h2>
<p><img decoding="async" loading="lazy" alt="3DS Enrollment Check Flow" src="/assets/images/3DSEnrollmentCheckFlow-f91f511e097347cfeae90ced54647132.png" width="1898" height="2576" class="img_ev3q"></p>
<p>More Detailed Sequence Diagram
<img decoding="async" loading="lazy" alt="Download the detailed sequence diagram" src="/assets/images/3dsecure2_call-flow-sequence-diagram-17ea6ab6089a0c3136ef513c7766f678.png" width="1898" height="2200" class="img_ev3q"><br></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="iframe-basis-authentication-under-construction">iframe-basis authentication (<font color="red">under-construction</font>)<a href="#iframe-basis-authentication-under-construction" class="hash-link" aria-label="Direct link to iframe-basis-authentication-under-construction" title="Direct link to iframe-basis-authentication-under-construction">​</a></h3>
<p><img decoding="async" loading="lazy" alt="3DS Enrollment Check Flow" src="/assets/images/3DSEnrollmentCheckFlow-f91f511e097347cfeae90ced54647132.png" width="1898" height="2576" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="supported-psp">Supported PSP<a href="#supported-psp" class="hash-link" aria-label="Direct link to Supported PSP" title="Direct link to Supported PSP">​</a></h2>
<table><thead><tr><th>Agency</th><th>Currency code</th><th>Zero amount</th><th>Notes</th></tr></thead><tbody><tr><td><a href="/guides/agency/rakutencard/">RakutenCard(Japan)</a></td><td>JPY</td><td>Supported (*1)</td><td>3DS authentication service provider is NTTData, NOT RakutenCard</td></tr><tr><td><a href="/guides/agency/veritrans_japan/">Veritrans(Japan)</a></td><td>JPY</td><td>Not supported (*1)</td><td>3DS authentication service provider is NTTData, NOT Veritrans<br>(Available from 2023 Mar. 15th. on STG)</td></tr></tbody></table>
<p>(*1) Zero amount is available with NTTData&#x27;s 3DS authentication, but whether it is available with Authorize or not depends on each PSP.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="api-endpoint">API Endpoint<a href="#api-endpoint" class="hash-link" aria-label="Direct link to API Endpoint" title="Direct link to API Endpoint">​</a></h2>
<div class="threeds2ApiEndpoint"><table><thead><tr><th>Environment</th><th>API Connection URL</th><th>Note</th></tr></thead><tbody><tr><td> DEV</td><td colspan="2">Not available</td></tr><tr><td>STG</td><td><code>https://payment-stg.global.rakuten.com/gp/3DSecureEnrollment/V2/Check</code></td><td>It is a public domain URL, not the one in Rakuten DC.</td></tr><tr><td>PRO</td><td><code>https://payment.global.rakuten.com/gp/3DSecureEnrollment/V2/Check</code></td><td>It is a public domain URL, not the one in Rakuten DC.</td></tr></tbody></table></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="request-data">Request Data<a href="#request-data" class="hash-link" aria-label="Direct link to Request Data" title="Direct link to Request Data">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-method">HTTP Method<a href="#http-method" class="hash-link" aria-label="Direct link to HTTP Method" title="Direct link to HTTP Method">​</a></h3>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="request-header">Request Header<a href="#request-header" class="hash-link" aria-label="Direct link to Request Header" title="Direct link to Request Header">​</a></h3>
<table><thead><tr><th>Header</th><th>Value</th><th>Remarks</th></tr></thead><tbody><tr><td>Content-Type</td><td>application/x-www-form-urlencoded</td><td></td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="request-parameters">Request Parameters<a href="#request-parameters" class="hash-link" aria-label="Direct link to Request Parameters" title="Direct link to Request Parameters">​</a></h3>
<p>The difference between V1 and V2 is about &quot;key_version&quot; as below.</p>
<div class="threeds2RequestParameters"><table><thead><tr><th>Parameter</th><th>Required</th><th style="text-align:center">Description</th><th style="text-align:center">Remarks</th></tr></thead><tbody><tr><td>paymentinfo</td><td>Y</td><td style="text-align:center">Base64 encoded of the request JSON</td><td style="text-align:center"></td></tr><tr><td>signature</td><td>Y</td><td style="text-align:center">HMAC SHA256 hash of the request JSON</td><td style="text-align:center">Key for HMAC SHA256 hash will be provided by PGW for each service</td></tr><tr><td>key_version</td><td>Y</td><td style="text-align:center">String request</td><td style="text-align:center">A version for keyset used for the authentication. key_version is linked with service_id.</td></tr></tbody></table></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="request-data-1">Request Data<a href="#request-data-1" class="hash-link" aria-label="Direct link to Request Data" title="Direct link to Request Data">​</a></h3>
<table><thead><tr><th>Lv</th><th>Logical Name</th><th>PhysicalName</th><th>Type</th><th>Min<br>size</th><th>Max<br>size</th><th>Required/<br>Optional/<br>Conditional</th><th>Multiple</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>Service ID</td><td>serviceId</td><td>ANS</td><td>1</td><td>40</td><td>R</td><td>-</td><td>Generated by Payment Gateway</td></tr><tr><td>1</td><td>Sub Service ID</td><td>subServiceId</td><td>ANS</td><td>1</td><td>40</td><td>R</td><td>-</td><td>The identification of the merchant on your system, in case you don&#x27;t have any identification set the same value of &quot;<strong>service_id</strong>&quot;</td></tr><tr><td>1</td><td>Enrollment ID</td><td>enrollmentId</td><td>ANS</td><td>1</td><td>50</td><td>R</td><td>-</td><td>Generated by the Service and must be unique for the &quot;<strong>service_id</strong>&quot;<br><font color="Fuchsia">Supported symbols:<br>- _ . @</font><br><br>Note:<br>PGW does <font color="red">NOT</font> control if enrollmentId is unique which means clients may use the same value of paymentId</td></tr><tr><td>1</td><td>Sending time</td><td>timestamp</td><td>NS</td><td>23</td><td>23</td><td>R</td><td>-</td><td>For details, see <a href="/guides/intro/card/#sending-time">Sending time</a></td></tr><tr><td>1</td><td>Agency Code</td><td>agencyCode</td><td>ANS</td><td>1</td><td>15</td><td>R</td><td>-</td><td>For details, see <a href="/guides/format/#format-of-priceamount">AgencyCode</a><br><br>See also above, &quot;<strong>Supported PSP</strong>&quot;</td></tr><tr><td>1</td><td>Callback URL</td><td>callbackUrl</td><td>ANS</td><td>8</td><td>2000</td><td>R</td><td>-</td><td>Must starts with http:// or https:// <br>After the authentication process, PGW (Payment Gateway) redirects the users with the result to this url. Typically it&#x27;s the url which services receive callback.</td></tr><tr><td>1</td><td>Currency Code</td><td>currencyCode</td><td>A</td><td>3</td><td>3</td><td>C (*1)</td><td>-</td><td>Please check the <a href="/guides/format/">format.</a><br>The same currency code is supposed to use when calling Authorize API with 3DS authentication result value.<br>Required for Payment Authentication (&quot;pa&quot;), or Non-Payment Authentication (&quot;npa&quot;) if 3DS Requestor Authentication Indicator = &quot;Recurring_Transaction&quot; or &quot;Installment_Transaction&quot;.</td></tr><tr><td>1</td><td>Amount</td><td>amount</td><td>NS</td><td>1</td><td>15</td><td>C (*1)</td><td>-</td><td>Please check the <a href="/guides/format/">format.</a><br>The same amount needs to be send later when calling Authorize API with 3DS authentication result value.<br>Required for Payment Authentication (&quot;pa&quot;), or Non-Payment Authentication (&quot;npa&quot;) if 3DS Requestor Authentication Indicator = &quot;Recurring_Transaction&quot; or &quot;Installment_Transaction&quot;.<br>When it is optional and currencyCode is null, treated based on the default currencyCode JPY.</td></tr><tr><td>1</td><td>Card token value</td><td>cardToken</td><td>AN</td><td>32</td><td>32</td><td>R</td><td>-</td><td>Card token value generated by PayVault</td></tr><tr><td>1</td><td>ThreeD Secure</td><td>threeDSecure</td><td></td><td></td><td></td><td>R</td><td>-</td><td></td></tr><tr><td>2</td><td>Merchant ID</td><td>merchantId</td><td>ANS</td><td>1</td><td>35</td><td>C (*4)</td><td>-</td><td>Merchant ID for processing 3DS2 authentication.<table><thead><tr><th>Brand<br>(a)</th><th>How to set</th><th>Value</th></tr></thead><tbody><tr><td>Visa</td><td>request: threeDSecure.merchantId<br>(shopcd)</td><td>e.g.)<br>5006880799991</td></tr><tr><td>MasterCard</td><td>request: threeDSecure.merchantId<br>(5 + 加盟店番号)<br>加盟店番号 is shared by rakutencard when you have a contract with them.</td><td>e.g.)<br>531438600011</td></tr><tr><td>American Express</td><td>Stored in PGW&#x27;s DB</td><td>NULL<br>common for all merchants</td></tr><tr><td>JCB</td><td>Stored in PGW&#x27;s DB</td><td>NULL<br>common for all merchants</td></tr><tr><td>JCB by RakutenCard<br>(b) </td><td>Stored in PGW&#x27;s DB</td><td>NULL<br>common for all merchants</td></tr><tr><td>Diners Club</td><td>Stored in PGW&#x27;s DB</td><td>NULL<br>common for all merchants</td></tr></tbody></table>(a) You can retrieve it from brandCode in <a href="/products/api-reference/pgw3/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Find/post">/Payment/V1/Find</a>.<br>(b) You can retrieve it from isRakutenCard in <a href="/products/api-reference/pgw3/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Find/post">/Payment/V1/Find</a>. </td></tr><tr><td>2</td><td>Merchant Name</td><td>merchantName</td><td>T</td><td>1</td><td>40</td><td>O</td><td>-</td><td>Merchant Name to display for Authentication process<br>Charset: UTF-8</td></tr><tr><td>2</td><td>Authentication Indicator Type</td><td>authenticationIndicatorType</td><td>AS</td><td>8</td><td>23</td><td>R</td><td>-</td><td>Indicates the type of Authentication request. This data element provides additional information to the ACS to determine the best approach for handing an authentication request.<br><strong>Values Accepted</strong><pre><code>• &quot;pa&quot; (Payment Authentication)
• &quot;npa&quot; (Non-Payment Authentication)</code></pre><details><summary> For details Info refer</summary><font color="blue">payment_transaction = &quot;01&quot; normal payment request</font><br><font color="blue">recurring_transaction = &quot;02&quot; subscription</font><br><font color="blue">installment_transaction = &quot;03&quot; instalment</font><br><font color="blue">add_card = &quot;04&quot; add card such as new membership registration/ 0  yen authorization</font><br><font color="blue">maintain_card = &quot;05&quot; check card availability for existing member</font><br>Those are the same as NTTData&#x27;s definitions which equals to EMV definitions.</details><table><thead><tr><th>NTTData definition</th><th>EMV definition</th></tr></thead><tbody><tr><td>01 = 決済取引<br>02 = 反復取引<br>03 = 割賦取引<br>04 = カード追加<br>05 =カード維持</td><td>01 = Payment transaction<br>02 = Recurring transaction<br>03 = Instalment transaction<br>04 = Add card<br>05 = Maintain card</td></tr></tbody></table></td></tr><tr><td>2</td><td>Message Category Type</td><td>messageCategoryType</td><td>A</td><td>2</td><td>3</td><td>R</td><td>-</td><td>Identifies the category of the message for a specific use case.<br><strong>Values Accepted</strong><pre><code>• &quot;payment_transaction&quot;
• &quot;recurring_transaction&quot;
• &quot;installment_transaction&quot;
• &quot;add_card&quot;
• &quot;maintain_card&quot;</code></pre><font color="red">Note:<br>messageCategoryType = &quot;npa&quot; cannot process Authorize as the next action because of missing eci and cavv in the response.</font></td></tr><tr><td>2</td><td>Transaction Type</td><td>transactionType</td><td>AS</td><td>15</td><td>27</td><td>C (*1)</td><td>-</td><td>Identifies the type of transaction being authenticated.<br>This field is <strong>required for VISA</strong>, also required in some markets (e.g. for Merchants in Brazil). Otherwise, optional.<br><strong>Values Accepted</strong><pre><code>• &quot;goods_service_purchase&quot;
• &quot;check_acceptance&quot;
• &quot;account_funding&quot;
• &quot;quasi-cash_transaction&quot;
• &quot;prepaid_activation_and_load&quot;</code></pre></td></tr><tr><td>2</td><td>Purchase Date &amp; Time</td><td>purchaseDate</td><td>N</td><td>14</td><td>14</td><td>C (*1)</td><td>-</td><td>Date and time of the purchase expressed in UTC.<br>Required for &quot;pa&quot; and also required for &quot;npa&quot; if 3DS Requestor Authentication Indicator = &quot;recurring_transaction&quot; or &quot;installment_transaction&quot;.<br><br>Format accepted:<br><font color="Fuchsia"><strong>yyyyMMddHHmmss</strong></font></td></tr><tr><td>2</td><td>Recurring Expiry</td><td>recurringExpiry</td><td>N</td><td>8</td><td>8</td><td>C (*1)</td><td>-</td><td>Date after which no further authorizations shall be performed.<br>Required if 3DS Requestor Authentication Indicator = &quot;recurring_transaction&quot; or &quot;installment_transaction&quot;.<br>Format accepted:<br><font color="Fuchsia"><strong>yyyyMMdd</strong></font></td></tr><tr><td>2</td><td>Recurring Frequency</td><td>recurringFrequency</td><td>N</td><td>1</td><td>4</td><td>C (*1)</td><td>-</td><td>Indicates the minimum number of days between authorizations.<br>Required if 3DS Requestor Authentication Indicator = &quot;recurring_transaction&quot; or &quot;installment_transaction&quot;.<br>Example values accepted:<ul><li>31</li><li>031</li><li>0031</li></ul></td></tr><tr><td>2</td><td>Installment Payment Data</td><td>installmentPaymentData</td><td>N</td><td>1</td><td>3</td><td>C (*1)</td><td>-</td><td>Indicates the maximum number of authorizations permitted for installment payments.<br>Required if the Merchant and Cardholder have agreed to installment payments, i.e. if 3DS Requestor Authentication Indicator = &quot;installment_transaction&quot;.</td></tr><tr><td>2</td><td>Challenge Indicator Type</td><td>challengeIndicatorType</td><td>AS</td><td>13</td><td>27</td><td>O</td><td>-</td><td>Indicates whether a challenge is requested for this transaction.<br>Values accepted:<ul><li>&quot;no_preference&quot;</li><li>&quot;no_challenge_requested&quot;</li><li>&quot;challenge_requested&quot;</li><li>&quot;challenge_requested_mandate&quot;</li></ul><table><thead><tr><th>Parameter</th><th>Explanation</th></tr></thead><tbody><tr><td>no_preference</td><td>If the issuer requires the challenge authentication, it becomes necessary to perform.</td></tr><tr><td>no_challenge_requested</td><td>As same as no_preference, the <font color="red">challenge authentication can be required</font> depending on the issuer.</td></tr><tr><td>challenge_requested<br>challenge_requested_mandate</td><td> It requests the challenge authentication to the issuer regardless of the risk, while the challenge authentication can be skipped depending on the issuer.</td></tr></tbody></table><br><div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span></div><div class="admonitionContent_BuS1"><ul><li>If it&#x27;s a request to Rakuten Card as a card issuer, it will work as it is set.</li><li>If it&#x27;s a request to other card issuers, the result is up to each issuer unlike 3DS1. As of now, it is difficult to know the logic of them how they work.</li><li>You can check the result on <a href="/guides/usermanual_en/">Seller Portal</a>.</li></ul></div></div></td></tr><tr><td>2</td><td>Card Holder Information</td><td>cardHolderInformation</td><td></td><td></td><td></td><td>O</td><td>-</td><td>Optional but strongly recommended to include for frictionless authentication.</td></tr><tr><td>3</td><td>Cardholder Billing Address City</td><td>billingAddressCity</td><td>T</td><td>1</td><td>50</td><td>O</td><td>-</td><td>Japanese, Alphabet or Katakana, any character is accepted.<br>The city of the Cardholder billing address associated with the card used for this purchase.<br>Any character is ok.</td></tr><tr><td>3</td><td>Cardholder Billing Address Country</td><td>billingAddressCountry</td><td>N</td><td>3</td><td>3</td><td>C</td><td>-</td><td>The country of the Cardholder billing address associated with the card used for this purchase.<br>Format:<br><font color="Fuchsia"><strong>ISO 3166-1 numeric</strong> three-digit country code     e.g.) 392 for Japan</font><br><font color="red">If billingAddressState exists in the request, billingAddressCountry becomes required.</font></td></tr><tr><td>3</td><td>Cardholder Billing Address Line 1</td><td>billingAddressLine1</td><td>T</td><td>1</td><td>50</td><td>O</td><td>-</td><td>Japanese, Alphabet or Katakana, any character is accepted.<br>First line of the street address or equivalent local portion of the Cardholder billing address associated with the card used for this purchase. <div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>It is acceptable as cutting 50 characters to set.</div><div class="admonitionContent_BuS1"> <font color="DarkSlateBlue">e.g.) 玉川2-21-1 二子玉川ライズ・オフィス 13F受付 ペイメントプラットフォーム課 ペイメントゲートウェイグループ<br>&quot;shippingAddressLine1&quot;: &quot;玉川2-21-1 二子玉川ライズ・オフィス 13F受付 ペイメントプラットフォーム課 ペイメントゲー&quot;,<br>&quot; shippingAddressLine2&quot;: &quot;トウェイグループ&quot; </font></div></div></td></tr><tr><td>3</td><td>Cardholder Billing Address Line 2</td><td>billingAddressLine2</td><td>T</td><td>1</td><td>50</td><td>O</td><td>-</td><td>Japanese, Alphabet or Katakana, any character is accepted.<br>Second line of the street address or equivalent local portion of the Cardholder billing address associated with the card used for this purchase.</td></tr><tr><td>3</td><td>Cardholder Billing Address Line 3</td><td>billingAddressLine3</td><td>T</td><td>1</td><td>50</td><td>O</td><td>-</td><td>Japanese, Alphabet or Katakana, any character is accepted.<br>Third line of the street address or equivalent local portion of the Cardholder billing address associated with the card used for this purchase.</td></tr><tr><td>3</td><td>Cardholder Billing Address Postal Code</td><td>billingAddressPostCode</td><td>NS</td><td>1</td><td>16</td><td>O</td><td>-</td><td>ZIP or other postal code of the Cardholder billing address associated with the card used for this purchase.<br>Example:<br><pre><code>Either with hyphen or without hyphen could be use.&quot;billingAddressPostCode&quot;: &quot;1580094&quot;
or
&quot;billingAddressPostCode&quot;: &quot;158-0094&quot;</code></pre></td></tr><tr><td>3</td><td>Cardholder Billing Address State</td><td>billingAddressState</td><td>N</td><td>1</td><td>3</td><td>O</td><td>-</td><td><pre><code>Please use &quot;01&quot;〜&quot;47&quot;
Example:
&quot;01&quot; for 北海道,
&quot;04&quot; for 宮城県</code></pre>The state or province of the Cardholder billing address associated with the card used for this purchase.<br><strong>Format:</strong><font color="Fuchsia">country subdivision code defined in <strong>ISO 3166-2</strong>.</font> </td></tr><tr><td>3</td><td>Cardholder Name</td><td>cardholderName</td><td>T</td><td>2</td><td>45</td><td>O</td><td>-</td><td>Name of the Cardholder.<br><font color="red">Alphanumeric special characters</font> defined in ISO/IEC 8859 format (EMV Book 4, “Appendix B”)<br>Katakana characters are NOT acceptable.<br><strong>Accepted Sample</strong><pre><code>○　RAKUTEN TARO (Half-width alphanumeric characters)
×　ラクテン タロウ (Full-width katakana)
×　ﾗｸﾃﾝ ﾀﾛｳ (Half-width Katakana)
× 楽天 太郎 (Kanji)</code></pre><br><strong>Note:</strong><ul><li>The “cardholderName” for NTTData is based on EMVCo’s spec and up to 45 characters. Authorize’s cardHolderName accepts 65. There has the difference lower case h and upper case H</li><li>MasterCard and AMEX do not send back failure for non-ISO/IEC 8859 characters.</li></ul></td></tr><tr><td>3</td><td>Cardholder Email Address</td><td>email</td><td>ANS</td><td>1</td><td>254</td><td>O</td><td>-</td><td>The email address associated with the account that is either entered by the Cardholder, or is on file with the 3DS Requestor.<br>Shall meet requirements of Section 3.4 of IETF <strong>RFC 5322</strong>.</td></tr><tr><td>3</td><td>Cardholder Shipping Address City</td><td>shippingAddressCity</td><td>T</td><td>1</td><td>50</td><td>O</td><td>-</td><td>Japanese, Alphabet or Katakana, any character is accepted.<br>City portion of the shipping address requested by the Cardholder.</td></tr><tr><td>3</td><td>Cardholder Shipping Address Country</td><td>shippingAddressCountry</td><td>N</td><td>3</td><td>3</td><td>C</td><td>-</td><td>Country of the shipping address requested by the Cardholder.<br>Format:<br><font color="Fuchsia"><strong>ISO 3166-1 numeric</strong> three-digit country code   e.g.) 392 for Japan</font><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span></div><div class="admonitionContent_BuS1">If shippingAddressState exists in the request, shippingAddressCountry becomes required.</div></div> </td></tr><tr><td>3</td><td>Cardholder Shipping Address Line 1</td><td>shippingAddressLine1</td><td>T</td><td>1</td><td>50</td><td>O</td><td>-</td><td>Japanese, Alphabet or Katakana, any character is accepted.<br>First line of the street address or equivalent local portion of the shipping address requested by the Cardholder.<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>It is acceptable as cutting 50 characters to set.</div><div class="admonitionContent_BuS1"><font color="DarkSlateBlue">e.g.) 玉川2-21-1 二子玉川ライズ・オフィス 13F受付 ペイメントプラットフォーム課 ペイメントゲートウェイグループ<br>&quot;shippingAddressLine1&quot;: &quot;玉川2-21-1 二子玉川ライズ・オフィス 13F受付 ペイメントプラットフォーム課 ペイメントゲー&quot;,<br>&quot; shippingAddressLine2&quot;: &quot;トウェイグループ&quot;</font></div></div></td></tr><tr><td>3</td><td>Cardholder Shipping Address Line 2</td><td>shippingAddressLine2</td><td>T</td><td>1</td><td>50</td><td>O</td><td>-</td><td>Japanese, Alphabet or Katakana, any character is accepted.<br>The second line of the street address or equivalent local portion of the shipping address requested by the Cardholder.</td></tr><tr><td>3</td><td>Cardholder Shipping Address Line 3</td><td>shippingAddressLine3</td><td>T</td><td>1</td><td>50</td><td>O</td><td>-</td><td>Japanese, Alphabet or Katakana, any character is accepted.<br>The third line of the street address or equivalent local portion of the shipping address requested by the Cardholder.</td></tr><tr><td>3</td><td>Cardholder Shipping Address Postal Code</td><td>shippingAddressPostCode</td><td>NS</td><td>1</td><td>16</td><td>O</td><td>-</td><td>The ZIP or other postal code of the shipping address requested by the Cardholder.<br>Example:<br><pre><code>Either with hyphen or without hyphen could be use.&quot;billingAddressPostCode&quot;: &quot;1580094&quot;
or
&quot;billingAddressPostCode&quot;: &quot;158-0094&quot;</code></pre></td></tr><tr><td>3</td><td>Cardholder Shipping Address State</td><td>shippingAddressState</td><td>N</td><td>1</td><td>3</td><td>O</td><td>-</td><td><pre><code>Please use &quot;01&quot;〜&quot;47&quot;
Example:
&quot;01&quot; for 北海道,
&quot;04&quot; for 宮城県</code></pre>The state or province of the Cardholder billing address associated with the card used for this purchase.<br>Format:<br><font color="Fuchsia">country subdivision code defined in ISO 3166-2.</font> </td></tr><tr><td>3</td><td>Cardholder Home Phone Number</td><td>homePhoneNumber</td><td>-</td><td>-</td><td>-</td><td>O</td><td>-</td><td><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span></div><div class="admonitionContent_BuS1">The home phone number provided by the Cardholder (Mobile phone numbers can be set here)</div></div></td></tr><tr><td>4</td><td>Cardholder Home Phone Number Country Code</td><td>countryCode</td><td>N</td><td>1</td><td>3</td><td>R</td><td>-</td><td>Format: <br><font color="Fuchsia"><strong>ITU-E.164</strong>     e.g.) 81 for Japan</font></td></tr><tr><td>4</td><td>Cardholder Home Phone Number Subscriber</td><td>subscriber</td><td>N</td><td>1</td><td>15</td><td>C (*2)</td><td>-</td><td>Subscriber sections of the number</td></tr><tr><td>3</td><td>Cardholder Mobile Phone Number</td><td>mobilePhoneNumber</td><td>-</td><td>-</td><td>-</td><td>O</td><td>-</td><td>The mobile phone number provided by the Cardholder.</td></tr><tr><td>4</td><td>Cardholder Mobile Phone Number Country Code</td><td>countryCode</td><td>N</td><td>1</td><td>3</td><td>C (*3)</td><td>-</td><td>Format: <br><font color="Fuchsia"><strong>ITU-E.164</strong>     e.g.) 81 for Japan</font></td></tr><tr><td>4</td><td>Cardholder Mobile Phone Number Subscriber</td><td>subscriber</td><td>N</td><td>1</td><td>15</td><td>C (*3)</td><td>-</td><td>Subscriber sections of the number</td></tr></tbody></table>
<p>A : Alpha, AN : Alphanumeric, ANS : Alphanumeric Symbol, NS : Numeric Symbol, N : Numeric, B: &quot;true&quot; or &quot;false&quot;, T: Text</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-the-required-field-combination-is-as-follows">(*1) The required field combination is as follows<a href="#1-the-required-field-combination-is-as-follows" class="hash-link" aria-label="Direct link to (*1) The required field combination is as follows" title="Direct link to (*1) The required field combination is as follows">​</a></h4>
<table><thead><tr><th>PSP</th><th colspan="10">NTT Data</th><th> VeritransJP</th></tr></thead><tbody><tr><td>Condition 1 (authenticationIndicatorType value)</td><td colspan="2">payment_transaction</td><td colspan="2">recurring_transaction<br></td><td colspan="2">installment_transaction</td><td colspan="2">add_card<br></td><td colspan="2">maintain_card<br></td><td>(Internally set payment_transaction)</td></tr><tr><td>Condition 2 (messageCategoryType value)</td><td>Payment Authentication (&quot;pa&quot;)<br></td><td>Non-Payment Authentication (npa)<br></td><td>Payment Authentication (&quot;pa&quot;)<br></td><td>Non-Payment Authentication (npa)<br></td><td>Payment Authentication (&quot;pa&quot;)<br></td><td>Non-Payment Authentication (npa)<br></td><td>Payment Authentication (&quot;pa&quot;)<br></td><td>Non-Payment Authentication (npa)<br></td><td>Payment Authentication (&quot;pa&quot;)<br></td><td>Non-Payment Authentication (npa)<br></td><td>(Internally set Payment Authentication &quot;pa&quot;)</td></tr><tr><td>serviceId</td><td>  〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td></tr><tr><td>subServiceId</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td></tr><tr><td>enrollmentId</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td></tr><tr><td>timestamp</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td></tr><tr><td>agencyCode</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td></tr><tr><td>callbackUrl</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td></tr><tr><td>currencyCode</td><td>〇</td><td></td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td></td><td>〇</td><td></td><td>〇</td></tr><tr><td>amount</td><td>〇</td><td></td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td></td><td>〇</td><td></td><td>〇</td></tr><tr><td>cardToken</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td></tr><tr><td>threeDSecure</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td></tr><tr><td>    merchantId (required for VISA/MasterCard)</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>× (unused for Veritrans)</td></tr><tr><td>    merchantName<br>(required to display specific Merchant Name. If there is no value, default name is shown)</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>× (unused for Veritrans)</td></tr><tr><td>    authenticationIndicatorType</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇 (unused for Veritrans, internally set payment_transaction)</td></tr><tr><td>    messageCategoryType</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇 (unused for Veritrans, internally set pa)</td></tr><tr><td>    transactionType<br>(required for VISA brand cards)</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>△</td><td>× (unused for Veritrans, internally set goods_service_purchase for VISA)</td></tr><tr><td>    purchaseDate</td><td>〇</td><td></td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td></td><td>〇</td><td></td><td>× (unused for Veritrans)</td></tr><tr><td>    recurringExpiry</td><td></td><td></td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td></td><td></td><td></td><td></td><td>× (unused for Veritrans)</td></tr><tr><td>    recurringFrequency</td><td></td><td></td><td>〇</td><td>〇</td><td>〇</td><td>〇</td><td></td><td></td><td></td><td></td><td>× (unused for Veritrans)</td></tr><tr><td>   installmentPaymentData</td><td></td><td></td><td></td><td></td><td>〇</td><td>〇</td><td></td><td></td><td></td><td></td><td>× (unused for Veritrans)</td></tr><tr><td>    challengeIndicatorType</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>cardHolderInformation<br>(Optional but strongly recommended to include for frictionless authentication)</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>
<p>(*2) Required if homePhoneNumber exists<br>
(*3) Required if  mobilePhoneNumber exists<br>
(*4) Set the value depending on the shopper&#x27;s credit card brand</p>
<table><thead><tr><th>Brand</th><th>Value</th></tr></thead><tbody><tr><td>VISA</td><td>shopcd</td></tr><tr><td>MASTER</td><td>5 + 加盟店番号</td></tr><tr><td>AMEX</td><td>NULL (Common for all shops, stored in PGW&#x27;s DB)</td></tr><tr><td>JCB</td><td>NULL (Common for all shops, stored in PGW&#x27;s DB)</td></tr><tr><td>RakutenCard JCB</td><td>NULL (Common for all shops, stored in PGW&#x27;s DB)</td></tr><tr><td>DINERS</td><td>NULL (Common for all shops, stored in PGW&#x27;s DB)</td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sample-of-request-data">Sample of Request Data<a href="#sample-of-request-data" class="hash-link" aria-label="Direct link to Sample of Request Data" title="Direct link to Sample of Request Data">​</a></h4>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-goods-sold">1. Goods sold<a href="#1-goods-sold" class="hash-link" aria-label="Direct link to 1. Goods sold" title="Direct link to 1. Goods sold">​</a></h5>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyCode&quot;: &quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;enrollmentId&quot;: &quot;AUTO_210427024418489RYsbAZnTfsg650E0cv4F31N3QNNNUJ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;timestamp&quot;: &quot;2021-04-27 02:44:18.492&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;callbackUrl&quot;: &quot;http://localhost&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;currencyCode&quot;: &quot;JPY&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;amount&quot;: &quot;100&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;cardToken&quot;: &quot;21041213001LhSgo0gLMrZNuPlAV1111&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;threeDSecure&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;merchantId&quot;: &quot;123456&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;merchantName&quot;: &quot;ペイメントGWグループ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;authenticationIndicatorType&quot;: &quot;payment_transaction&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;messageCategoryType&quot;: &quot;pa&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;transactionType&quot;: &quot;goods_service_purchase&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;purchaseDate&quot;: &quot;20210420000000&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;cardHolderInformation&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressCity&quot;: &quot;世田谷区&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressLine1&quot;: &quot;玉川１−１４−１&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressLine2&quot;: &quot;Rakuten Crimson House 12F&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressLine3&quot;: &quot;ペイメントGWグループ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressState&quot;: &quot;13&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressPostCode&quot;: &quot;158-0094&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressCountry&quot;: &quot;392&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressCity&quot;: &quot;世田谷区&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressLine1&quot;: &quot;玉川１−１４−１&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressLine2&quot;: &quot;Rakuten Crimson House 12F&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressLine3&quot;: &quot;ペイメントGWグループ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressState&quot;: &quot;13&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressPostCode&quot;: &quot;158-0094&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressCountry&quot;: &quot;392&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;cardholderName&quot;: &quot;RAKUTEN TARO&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;email&quot;: &quot;pgw3point0@rakuten.com&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;homePhoneNumber&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;countryCode&quot;: &quot;81&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;subscriber&quot;: &quot;5055816910&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;mobilePhoneNumber&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;countryCode&quot;: &quot;81&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;subscriber&quot;: &quot;5055816910&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-subscription--required-users-challenge">2. Subscription + required user&#x27;s challenge<a href="#2-subscription--required-users-challenge" class="hash-link" aria-label="Direct link to 2. Subscription + required user&#x27;s challenge" title="Direct link to 2. Subscription + required user&#x27;s challenge">​</a></h5>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyCode&quot;: &quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;enrollmentId&quot;: &quot;AUTO_210427024418489RYsbAZnTfsg650E0cv4F31N3QNNNUK&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;timestamp&quot;: &quot;2021-04-27 02:44:18.493&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;callbackUrl&quot;: &quot;http://localhost&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;currencyCode&quot;: &quot;JPY&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;amount&quot;: &quot;200000&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;cardToken&quot;: &quot;21041213001LhSgo0gLMrZNuPlAV1111&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;threeDSecure&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;merchantId&quot;: &quot;123456&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;merchantName&quot;: &quot;ペイメントGWグループ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;authenticationIndicatorType&quot;: &quot;recurring_transaction&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;messageCategoryType&quot;: &quot;pa&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;transactionType&quot;: &quot;goods_service_purchase&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;purchaseDate&quot;: &quot;20210420000000&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;challengeIndicatorType&quot;: &quot;challenge_requested_mandate&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;recurringExpiry&quot;: &quot;20310501&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;recurringFrequency&quot;: &quot;30&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;cardHolderInformation&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressCity&quot;: &quot;世田谷区&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressLine1&quot;: &quot;玉川１−１４−１&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressLine2&quot;: &quot;Rakuten Crimson House 12F&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressLine3&quot;: &quot;ペイメントGWグループ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressState&quot;: &quot;13&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressPostCode&quot;: &quot;158-0094&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressCountry&quot;: &quot;392&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressCity&quot;: &quot;世田谷区&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressLine1&quot;: &quot;玉川１−１４−１&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressLine2&quot;: &quot;Rakuten Crimson House 12F&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressLine3&quot;: &quot;ペイメントGWグループ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressState&quot;: &quot;13&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressPostCode&quot;: &quot;158-0094&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressCountry&quot;: &quot;392&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;cardholderName&quot;: &quot;RAKUTEN TARO&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;email&quot;: &quot;pgw3point0@rakuten.com&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;homePhoneNumber&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;countryCode&quot;: &quot;81&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;subscriber&quot;: &quot;5055816910&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;mobilePhoneNumber&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;countryCode&quot;: &quot;81&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;subscriber&quot;: &quot;5055816910&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-installment-payment">3. Installment payment<a href="#3-installment-payment" class="hash-link" aria-label="Direct link to 3. Installment payment" title="Direct link to 3. Installment payment">​</a></h5>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyCode&quot;: &quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;enrollmentId&quot;: &quot;AUTO_210427024418489RYsbAZnTfsg650E0cv4F31N3QNNNUK&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;timestamp&quot;: &quot;2021-04-27 02:44:18.493&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;callbackUrl&quot;: &quot;http://localhost&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;currencyCode&quot;: &quot;JPY&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;amount&quot;: &quot;100&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;cardToken&quot;: &quot;21041213001LhSgo0gLMrZNuPlAV1111&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;threeDSecure&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;merchantId&quot;: &quot;123456&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;merchantName&quot;: &quot;ペイメントGWグループ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;authenticationIndicatorType&quot;: &quot;installment_transaction&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;messageCategoryType&quot;: &quot;pa&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;transactionType&quot;: &quot;goods_service_purchase&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;purchaseDate&quot;: &quot;20210420000000&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;recurringExpiry&quot;: &quot;20310501&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;recurringFrequency&quot;: &quot;30&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;installmentPaymentData&quot;: &quot;120&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;cardHolderInformation&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressCity&quot;: &quot;世田谷区&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressLine1&quot;: &quot;玉川１−１４−１&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressLine2&quot;: &quot;Rakuten Crimson House 12F&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressLine3&quot;: &quot;ペイメントGWグループ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressState&quot;: &quot;13&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressPostCode&quot;: &quot;158-0094&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;billingAddressCountry&quot;: &quot;392&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressCity&quot;: &quot;世田谷区&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressLine1&quot;: &quot;玉川１−１４−１&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressLine2&quot;: &quot;Rakuten Crimson House 12F&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressLine3&quot;: &quot;ペイメントGWグループ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressState&quot;: &quot;13&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressPostCode&quot;: &quot;158-0094&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;shippingAddressCountry&quot;: &quot;392&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;cardholderName&quot;: &quot;RAKUTEN TARO&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;email&quot;: &quot;pgw3point0@rakuten.com&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;homePhoneNumber&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;countryCode&quot;: &quot;81&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;subscriber&quot;: &quot;5055816910&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;mobilePhoneNumber&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;countryCode&quot;: &quot;81&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                &quot;subscriber&quot;: &quot;5055816910&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4card-verification-with-minimum-request-parameters-even-but-good-to-provide-user-information-to-get-frctionless-and-to-reduce-the-frop-rate">4.Card verification with minimum request parameters, even but good to provide user information to get Frctionless and to reduce the frop rate.<a href="#4card-verification-with-minimum-request-parameters-even-but-good-to-provide-user-information-to-get-frctionless-and-to-reduce-the-frop-rate" class="hash-link" aria-label="Direct link to 4.Card verification with minimum request parameters, even but good to provide user information to get Frctionless and to reduce the frop rate." title="Direct link to 4.Card verification with minimum request parameters, even but good to provide user information to get Frctionless and to reduce the frop rate.">​</a></h5>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyCode&quot;: &quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;enrollmentId&quot;: &quot;AUTO_210427024418489RYsbAZnTfsg650E0cv4F31N3QNNNUJ&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;timestamp&quot;: &quot;2021-04-27 02:44:18.492&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;callbackUrl&quot;: &quot;http://localhost&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;cardToken&quot;: &quot;21041213001LhSgo0gLMrZNuPlAV1111&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;threeDSecure&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;merchantId&quot;: &quot;123456&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;authenticationIndicatorType&quot;: &quot;payment_transaction&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;messageCategoryType&quot;: &quot;npa&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;transactionType&quot;: &quot;goods_service_purchase&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>For VeritransJP, please refer to <a href="/guides/agency/veritrans_japan/#3DS2RequestandResponsesample">Agency(Veritrans Japan)#3DS2RequestandResponsesample</a></strong></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13-response-data-of-phase-1-before-redirection">(1/3) Response Data of Phase 1 (Before redirection)<a href="#13-response-data-of-phase-1-before-redirection" class="hash-link" aria-label="Direct link to (1/3) Response Data of Phase 1 (Before redirection)" title="Direct link to (1/3) Response Data of Phase 1 (Before redirection)">​</a></h2>
<table><thead><tr><th style="text-align:center">No.</th><th style="text-align:center">Lv</th><th style="text-align:left">Logical Name</th><th style="text-align:left">PhysicalName</th><th style="text-align:center">Type</th><th style="text-align:center">Min</th><th style="text-align:center">Max</th><th style="text-align:center">Required</th><th style="text-align:center">Multiple</th><th style="text-align:left">Description</th><th>Sample</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:left">Result type</td><td style="text-align:left">resultType</td><td style="text-align:center">A</td><td style="text-align:center">1</td><td style="text-align:center">15</td><td style="text-align:center">R (<font color="blue">*3</font>)</td><td style="text-align:center">-</td><td style="text-align:left"><strong>success</strong> is returned when Payment Gateway could <strong>get response with redirect HTML from NTTData</strong>, otherwise <strong>failure</strong>.<br>(*1) See details, <a href="/guides/intro/card/#error-code">ErrorCode</a></td><td>&quot;SUCCESS&quot;</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:left">Service ID</td><td style="text-align:left">serviceId</td><td style="text-align:center">ANS</td><td style="text-align:center">1</td><td style="text-align:center">40</td><td style="text-align:center">R (<font color="blue">*3</font>)</td><td style="text-align:center">-</td><td style="text-align:left">The same value as the request</td><td>&quot;stg-all-gp-soapui&quot;</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:left">Sub Service ID</td><td style="text-align:left">subServiceId</td><td style="text-align:center">ANS</td><td style="text-align:center">1</td><td style="text-align:center">40</td><td style="text-align:center">R (<font color="blue">*3</font>)</td><td style="text-align:center">-</td><td style="text-align:left">The same value as the request</td><td>&quot;stg-all-gp-soapui&quot;</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">1</td><td style="text-align:left">Enrollment ID</td><td style="text-align:left">enrollmentId</td><td style="text-align:center">ANS</td><td style="text-align:center">1</td><td style="text-align:center">50</td><td style="text-align:center">R (<font color="blue">*3</font>)</td><td style="text-align:center">-</td><td style="text-align:left">The same value as the request</td><td>&quot;513782-20210729-17202915&quot;</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">1</td><td style="text-align:left">Agency Request ID</td><td style="text-align:left">agencyRequestId</td><td style="text-align:center">AN</td><td style="text-align:center">1</td><td style="text-align:center">50</td><td style="text-align:center">C</td><td style="text-align:center">-</td><td style="text-align:left">A unique ID generated by Payment Gateway, it will be returned if gateway is able to connect to NTTData.<br>You may use this ID to check the request with NTTData.</td><td>&quot;NTDE210729041955296YcvetblQLFlLY4IvX&quot;</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">1</td><td style="text-align:left">Transaction time</td><td style="text-align:left">transactionTime</td><td style="text-align:center">NS</td><td style="text-align:center">23</td><td style="text-align:center">23</td><td style="text-align:center">R</td><td style="text-align:center">-</td><td style="text-align:left">yyyy-MM-dd HH:mm<!-- -->:ss<!-- -->.SSS<br>Timezone(UTC)</td><td>&quot;2021-07-29 04:20:11.615&quot;</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">1</td><td style="text-align:left">Agency Code</td><td style="text-align:left">agencyCode</td><td style="text-align:center">ANS</td><td style="text-align:center">1</td><td style="text-align:center">15</td><td style="text-align:center">R (<font color="blue">*3</font>)</td><td style="text-align:center">-</td><td style="text-align:left">The same value as the request</td><td>&quot;nttdata&quot;</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">1</td><td style="text-align:left">Error code</td><td style="text-align:left">errorCode</td><td style="text-align:center">ANS</td><td style="text-align:center">0</td><td style="text-align:center">50</td><td style="text-align:center">O</td><td style="text-align:center">-</td><td style="text-align:left">Returned when resultType == failure<br><a href="/guides/intro/card/#error-code">See here</a>→Error Code</td><td></td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">1</td><td style="text-align:left">Error message</td><td style="text-align:left">errorMessage</td><td style="text-align:center">T</td><td style="text-align:center">0</td><td style="text-align:center">512</td><td style="text-align:center">O</td><td style="text-align:center">-</td><td style="text-align:left">Returned when resultType == failure</td><td></td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">1</td><td style="text-align:left">3D Secure Verification Status</td><td style="text-align:left">threeDSecureAuthenticationStatus</td><td style="text-align:center">ANS</td><td style="text-align:center">1</td><td style="text-align:center">50</td><td style="text-align:center">C  (<font color="blue">*2</font>)</td><td style="text-align:center">-</td><td style="text-align:left">This status indicates the authentication status and you can use to judge the next action such as <strong>do redirection for authentication, send authorize request with 3DS result</strong>, etc.<br>See details below <font color="blue">(*1)</font></td><td>&quot;authentication_available&quot;</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">1</td><td style="text-align:left">Redirection HTML</td><td style="text-align:left">redirectionHtml</td><td style="text-align:center">ANS</td><td style="text-align:center">1</td><td style="text-align:center">50000</td><td style="text-align:center">C  (<font color="blue">*2</font>)</td><td style="text-align:center">-</td><td style="text-align:left">This contains the full html, in base 64.</td><td></td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">1</td><td style="text-align:left">Reference</td><td style="text-align:left">Reference</td><td style="text-align:center">ANS</td><td style="text-align:center">0</td><td style="text-align:center">900</td><td style="text-align:center">O</td><td style="text-align:center">-</td><td style="text-align:left">If it&#x27;s about 3ds/enrollment check, you can refer the following.<br><a href="/guides/agency/nttdata/">Agency(NTT Data)</a><br><br>If not, you can refer <a href="/products/pgw3/#reference">/Payment/V1/Find#/Payment/V1/Find-Reference.</a></td><td></td></tr><tr><td style="text-align:center">13</td><td style="text-align:center">1</td><td style="text-align:left">Key Version</td><td style="text-align:left">keyVersion</td><td style="text-align:center">N</td><td style="text-align:center">1</td><td style="text-align:center">-</td><td style="text-align:center">R</td><td style="text-align:center">-</td><td style="text-align:left">The version of hash key and aes key, default value is 1</td><td>&quot;1&quot;</td></tr></tbody></table>
<p>A : Alpha, AN : Alphanumeric, ANS : Alphanumeric Symbol, NS : Numeric Symbol, N : Numeric<br>
(*2) returned when threeDSecureAuthenticationStatus is authentication_available<br>
(*3) If the requested value is invalid, the response value can be null as invalid value may not be returned</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-3d-secure-verification-status">(*1) 3D Secure Verification Status<a href="#1-3d-secure-verification-status" class="hash-link" aria-label="Direct link to (*1) 3D Secure Verification Status" title="Direct link to (*1) 3D Secure Verification Status">​</a></h2>
<table><thead><tr><th>Case</th><th>Status<br>(threeDSecureAuthenticationStatus)</th><th>Notes</th><th>ResultType</th><th>has redirectionHtml</th><th>has threeDSecureAuthenticationResult</th><th>Next Action</th></tr></thead><tbody><tr><td rowspan="2"><strong>Before</strong> redirection</td><td>authentication_available</td><td>The <strong>html string</strong> used for the redirection is available.</td><td>success</td><td>Yes</td><td>No</td><td>Redirect the user for authentication.</td></tr><tr><td>connection_error</td><td>This is a general error, including connection issues.</td><td>success</td><td>No</td><td>No</td><td><ul><li>Authorize or AuthorizeAndCapture can be called,</li></ul><ul><li>but since threeDSecureAuthenticationResult is not available, it will be normal Authorize request.</li></ul></td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sample-response-data">Sample Response Data<a href="#sample-response-data" class="hash-link" aria-label="Direct link to Sample Response Data" title="Direct link to Sample Response Data">​</a></h2>
<p>Success (authentication_available)</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Success (authentication_available) Rakuma Sample</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;redirectionHtml&quot;:&quot;ImJ0biBkLW5vbmUiIG9uY2xpY2s9PjwvYnV0dG9uPgogICAgPC9kaXY+CjwvYm9keT4KPC9odG1sPg==&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;resultType&quot;:&quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;transactionTime&quot;:&quot;2022-04-15 05:32:47.803&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;enrollmentId&quot;:&quot;135974320&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;agencyRequestId&quot;:&quot;NTDE220415053247530IQmbMgdVqayxlIIKv&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;threeDSecureAuthenticationStatus&quot;:&quot;authentication_available&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span></div><div class="admonitionContent_BuS1"><p>If you need reference object  in the response, please raise a ticket to PGW</p></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Success (authentication_available) rticket Sample</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;redirectionHtml&quot;:&quot;ogICAgPC9kaXY+CjwvYm9keT4KPC9odG1sPg==&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;resultType&quot;:&quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;transactionTime&quot;:&quot;2022-04-15 05:32:38.146&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;reference&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;nttDataResult&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;threeDSMerchantTransID&quot;:&quot;NTDE220415053237864e7DuQQG2F897kkq3n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;enrollmentId&quot;:&quot;RT00003WGKRZ_E&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;agencyRequestId&quot;:&quot;NTDE220415053237864e7DuQQG2F897kkq3n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;threeDSecureAuthenticationStatus&quot;:&quot;authentication_available&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Success (connection_error)<br>
threeDSRequestorErrorCode last 3 digit 001and 002 for system error</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Success but System Error at NTTDATA</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;reference&quot;: {&quot;nttDataResult&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;threeDSRequestorErrorCode&quot;: &quot;R1000:[NttData CAFIS 3DS Connector] system error&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;messageDigest&quot;: &quot;10565DABE1A0DCEFDD2D060AC532265B7E700C2FBDD5CC365D1FD6E538A22378D1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;threeDSMerchantTransID&quot;: &quot;NTDE210629014443852TKbIE3Gtw2yBjw5yq&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;enrollmentId&quot;: &quot;AUTO_210629014441748898F15HhiGGzBBczgXmoT857cuj8IP&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keyVersion&quot;: &quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;threeDSecureAuthenticationStatus&quot;: &quot;connection_error&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;agencyRequestId&quot;: &quot;NTDE210629014443852TKbIE3Gtw2yBjw5yq&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;agencyCode&quot;: &quot;rakutencard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;transactionTime&quot;: &quot;2021-06-29 01:44:44.301&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resultType&quot;: &quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>R3003: according to NTTData this value returned if shopper browser back and send request more than 2 times.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">R3003:NttData ACS invalid transaction status</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;resultType&quot;:&quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;transactionTime&quot;:&quot;2021-10-14 00:40:47.590&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;reference&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;nttDataResult&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;threeDSMerchantTransID&quot;:&quot;NTDE211014003603070JoiFKcg0CXi4VPziO&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;threeDSRequestorTransID&quot;:&quot;208467db-dbf9-4abc-82a2-5e164ac82535&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;threeDSRequestorErrorCode&quot;:&quot;R3003:[NttData ACS] invalid transaction status&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;enrollmentId&quot;:&quot;RT00003HFKU4_E&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;agencyRequestId&quot;:&quot;NTDE211014003603070JoiFKcg0CXi4VPziO&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;threeDSecureAuthenticationStatus&quot;:&quot;connection_error&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;callbackUrl&quot;:&quot;https://ticket.rakuten.co.jp/lots/payment/card/confirm&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The NTT Data CAFIS 3DS Connector has a timeout value, for example, after transitioning to Areq and the CAFIS 3DS Connector sending a telegram. If there is no response within 25 seconds, the R2002 error code will be returned.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Success but System Error at NTTDATA</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;resultType&quot;:&quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;transactionTime&quot;:&quot;2021-08-06 02:29:06.694&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;reference&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;nttDataResult&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;threeDSMerchantTransID&quot;:&quot;NTDE210806022840639iUEV15uy50WYs5j0s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;threeDSRequestorTransID&quot;:&quot;37f62f65-3fc6-4f47-ab06-f8a234d6042e&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;threeDSRequestorErrorCode&quot;:&quot;R2002:[NttData AReq] transaction time out&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;enrollmentId&quot;:&quot;ch_6FXGEFKTLX5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;agencyRequestId&quot;:&quot;NTDE210806022840639iUEV15uy50WYs5j0s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;threeDSecureAuthenticationStatus&quot;:&quot;connection_error&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;callbackUrl&quot;:&quot;https://stg.online.checkout.rakuten.co.jp/payment/callback&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="failure-invalid_request_parameter">FAILURE (invalid_request_parameter)<a href="#failure-invalid_request_parameter" class="hash-link" aria-label="Direct link to FAILURE (invalid_request_parameter)" title="Direct link to FAILURE (invalid_request_parameter)">​</a></h3>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">FAILURE</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;resultType&quot;:&quot;failure&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;errorCode&quot;:&quot;invalid_request_parameter&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;errorMessage&quot;:&quot;unsupported card brand&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;transactionTime&quot;:&quot;2021-12-30 14:39:43.846&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;enrollmentId&quot;:&quot;HT00003P8FGA_E&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">FAILURE</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resultType&quot;: &quot;failure&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;errorCode&quot;: &quot;invalid_request_parameter&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;errorMessage&quot;: &quot;validation error:threeDSecure.messageCategoryType must not be Null &quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;transactionTime&quot;: &quot;2021-06-29 01:47:48.107&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keyVersion&quot;: &quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;enrollmentId&quot;: &quot;AUTO_2106290147478829l2iqoVWxZW7P1C9LPQYfkP0AULvFS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;agencyCode&quot;: &quot;rakutencard&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>FAILURE (system_error)</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">FAILURE</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;keyVersion&quot;:&quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;resultType&quot;:&quot;failure&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;errorCode&quot;:&quot;system_error&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;errorMessage&quot;:&quot;failed to initialize NttDataRequestConfig&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;transactionTime&quot;:&quot;2021-08-18 01:30:52.189&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;enrollmentId&quot;:&quot;ch_6T7JHHAX9C4&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;agencyCode&quot;:&quot;rakutencard&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="23-response-data-of-phase-2-after-redirection">(2/3) Response Data of Phase 2 (After redirection)<a href="#23-response-data-of-phase-2-after-redirection" class="hash-link" aria-label="Direct link to (2/3) Response Data of Phase 2 (After redirection)" title="Direct link to (2/3) Response Data of Phase 2 (After redirection)">​</a></h2>
<table><thead><tr><th>NO</th><th>Lv</th><th>Logical Name</th><th>Physical Name</th><th>Type</th><th>Minimum size</th><th>Maximum size </th><th>Required<br>Optional<br>Conditional</th><th>Multiple</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>Result type</td><td>resultType</td><td>A</td><td>1</td><td>15</td><td>R (<font color="blue">*3</font>)</td><td>-</td><td><strong>success</strong> is returned when Payment Gateway could <strong>get response with redirect HTML from NTTData,</strong> otherwise <strong>failure.</strong><br>(*1) See details, <a href="/guides/intro/card/#error-code">ErrorCode</a></td></tr><tr><td>2</td><td>1</td><td>Service ID</td><td>serviceId</td><td>ANS</td><td>1</td><td>40</td><td>R (<font color="blue">*3</font>)</td><td>-</td><td>The same value as the request</td></tr><tr><td>3</td><td>1</td><td>Sub Service ID</td><td>subServiceId</td><td>ANS</td><td>1</td><td>40</td><td>R (<font color="blue">*3</font>)</td><td>-</td><td>The same value as the request</td></tr><tr><td>4</td><td>1</td><td>Enrollment ID</td><td>enrollmentId</td><td>AN</td><td>1</td><td>50</td><td>R (<font color="blue">*3</font>)</td><td>-</td><td>The same value as the request</td></tr><tr><td>5</td><td>1</td><td>Agency Request ID</td><td>agencyRequestId</td><td>AN</td><td>1</td><td>50</td><td>R (<font color="blue">*3</font>)</td><td>-</td><td>A unique ID generated by Payment Gateway.<br>It will be returned if PGW is able to connect to NTTData, and this ID can be used to check the authentication request with NTTData.</td></tr><tr><td>6</td><td>1</td><td>Transaction time</td><td>transactionTime</td><td>NS</td><td>23</td><td>23</td><td>R</td><td>-</td><td>yyyy-MM-dd HH:mm<!-- -->:ss<!-- -->.SSS<br>Timezone(UTC)</td></tr><tr><td>7</td><td>1</td><td>Agency Code</td><td>agencyCode</td><td>ANS</td><td>1</td><td>15</td><td>R (<font color="blue">*3</font>)</td><td>-</td><td>The same value as the request</td></tr><tr><td>8</td><td>1</td><td>Error code</td><td>errorCode</td><td>ANS</td><td>0</td><td>50</td><td>O</td><td>-</td><td>Returned when resultType == failure<br><a href="/guides/intro/card/#error-code">See here</a>→Error Code</td></tr><tr><td>9</td><td>1</td><td>Error message</td><td>errorMessage</td><td>T</td><td>0</td><td>512</td><td>O</td><td>-</td><td>Returned when resultType == failure</td></tr><tr><td>10</td><td>1</td><td>3D Secure Verification Status</td><td>threeDSecureAuthenticationStatus<br></td><td>ANS</td><td>1</td><td>50</td><td>C</td><td>-</td><td>This status indicates the authentication status and you can use it to judge the next action, such as <strong>redirection for authentication, sending authorization request with 3D Secure result,</strong> etc.<br><br>See details below <font color="blue">(*1)</font></td></tr><tr><td>12</td><td>1</td><td>3DSecure Authentication Result</td><td>threeDSecureAuthenticationResult</td><td></td><td></td><td></td><td>C (<font color="blue">*2</font>)</td><td>-</td><td></td></tr><tr><td>13</td><td>2</td><td>　3DSecure Message Version</td><td>　messageVersion</td><td>ANS</td><td>0</td><td>10 (*1)</td><td>O</td><td>-</td><td>3DSecure message version. (example: &quot;2.1.0&quot;)</td></tr><tr><td>14</td><td>2</td><td>　3DSecure CAVV Algorithm</td><td>　cavvAlgorithm</td><td>ANS</td><td>0</td><td>1 (*1)</td><td>O</td><td>-</td><td>3DSecure CAVV algorithm.<br>Fixed value &quot;9&quot; for RakutenCard Authorize</td></tr><tr><td>15</td><td>2</td><td>　3DSecure CAVV</td><td>　cavv</td><td>ANS</td><td>0</td><td>28 (*1)</td><td>O</td><td>-</td><td>3DSecure CAVV. (example: &quot;jDeG4JBrSQzKAREFatG/Shrcq+k=&quot;)<br><font color="red">Note) Not included if messageCategoryType is &quot;npa&quot;</font></td></tr><tr><td>16</td><td>2</td><td>　3DSecure ECI</td><td>　eci</td><td>ANS</td><td>0</td><td>2 (*1)</td><td>O</td><td>-</td><td>3DSecure ECI<br>&quot;01&quot;: Attempt (MasterCard)<br>&quot;02&quot;: Authentication successful (MasterCard)<br>&quot;05&quot;: Authentication successful (Visa, JCB)<br>&quot;06&quot;: Attempt (Visa, JCB) or NOT enrolled for 3DSecure (MasterCard, Visa, JCB)&gt;<br>&quot;07&quot;: Authentication execution NOT possible (Visa, JCB), For MasterCard, Recurring Transaction authenticated by ACS<br><br><font color="red">Note) Not included if messageCategoryType is &quot;npa&quot;</font><br>To verify about MasterCard please refer page 16 <br><a href="https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=2647742317&amp;preview=/2647742317/3022480909/MasterCard_DS2IC_3DSIDCheck.pdf" target="_blank" rel="noopener noreferrer">MasterCard_DS2IC_3DSIDCheck.pdf</a></td></tr><tr><td>17</td><td>2</td><td>3DSecure transaction identifier (XID)</td><td>transactionId</td><td>ANS</td><td>0</td><td>28 (*1)</td><td>O</td><td>-</td><td><p>3DSecure transaction identifier (XID).</p><table><thead><tr><th>agency_code</th><th>Card Brand</th><th>Value</th></tr></thead><tbody><tr><td>rakutencard</td><td>any</td><td>Fixed value &quot; &quot; (space)</td></tr><tr><td rowspan="2">veritrans_jp</td><td>AMEX</td><td>28 characters<br>e.g.) AgEAAGdE5S/qT0hYnq2imxgjQsQ=</td></tr><tr><td>other than AMEX</td><td>NULL</td></tr></tbody></table></td></tr><tr><td>18</td><td>2</td><td>3DSecure transaction status</td><td>transactionStatus</td><td>ANS</td><td>0</td><td>1 (*1)</td><td>O</td><td>-</td><td>3DSecure transaction status<br>&quot;Y&quot;: 3DSecure successful<br>&quot;N&quot;: 3DSecure failure (due to issuer or card holder)<br>&quot;U&quot;: 3DSecure failure (any other reason)<br>&quot;A&quot;: Attempt (3DSecure authentication attempted successfully)<br>&quot;C&quot;: 3DSecure failure<br>&quot;R&quot;: 3DSecure failure (rejected by issuer)<br>&quot;&quot;: No value (Blank and the field by itself will not be in the JSON)</td></tr><tr><td>19</td><td>2</td><td>DS Transaction Identifier</td><td>dsTransactionId</td><td>ANS</td><td>0</td><td>36</td><td>O</td><td></td><td>UUID assigned by DS</td></tr><tr><td>20</td><td>2</td><td>3DSecure Server Transaction Identifier</td><td>threeDSecureServerTransactionId</td><td>ANS</td><td>0</td><td>36</td><td>O</td><td></td><td>UUID assigned by 3DS Server</td></tr><tr><td>21</td><td>1</td><td>Response Reference</td><td>reference</td><td>ANS</td><td>0</td><td>900</td><td>O</td><td>-</td><td><a href="/guides/agency/nttdata/#find-api">sample</a></td></tr><tr><td>22</td><td>1</td><td>Key Version</td><td>keyVersion</td><td>N</td><td>1</td><td>-</td><td>R</td><td>-</td><td>version of hash key and aes key, default value is 1</td></tr><tr><td>23</td><td>1</td><td>Callback Url</td><td>callbackUrl</td><td>ANS</td><td>0</td><td>2000</td><td>O</td><td>-</td><td>Client Url to which callback response is sent<br>For veritransJP : It is extracted from payment_3ds_info_manager table</td></tr></tbody></table>
<p>A : Alpha, AN : Alphanumeric, ANS : Alphanumeric Symbol, NS : Numeric Symbol, N : Numeric</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-3d-secure-verification-status-1">(*1) 3D Secure Verification Status<a href="#1-3d-secure-verification-status-1" class="hash-link" aria-label="Direct link to (*1) 3D Secure Verification Status" title="Direct link to (*1) 3D Secure Verification Status">​</a></h2>
<table><thead><tr><th>Case</th><th>Status<br>(threeDSecureAuthenticationStatus)</th><th>transactionStatus</th><th>Definition</th><th>Next Action</th></tr></thead><tbody><tr><td rowspan="5">After redirection</td><td>fully_authenticated</td><td>Y</td><td><strong>Fully Authenticated<br>(完全認証済)</strong><br>3DS authentication is executed and success.<br><br>※To know if Challenge Authentication is processed, please refer to <a href="/guides/3dsecure2/challenge_authentication/#how-to-find-out-whether-challenge-authentication-is-processed-or-not-from-the-response">Challenge Authentication#HowtofindoutwhetherChallengeAuthenticationisprocessedornotfromtheresponse</a></td><td rowspan="2">Call <strong>Authorize</strong> or <strong>AuthorizeAndCapture API with threeDSecureAuthenticationResult.</strong><br><br><br>※<font color="red">Liability shift would NOT be applied once the transaction is modified</font> except &quot;Decreasing Captured Amount&quot;<br>i.e.<br>Authorize ⇒ Capture ⇒ Modify (Decrease)<br></td></tr><tr><td>eligible_for_3d_secure</td><td>A</td><td><strong>Deemed Authenticated<br>(みなし認証済)</strong><br>Although 3DS authentication is not executed, treat as 3DS authenticated based on usage history.<br><br>※ To avoid Deemed Authenticated, please refer to <a href="/guides/3dsecure2/challenge_authentication/#how-to-force-customers-to-process-challenge-authentication">Challenge Authentication#HowtoforcecustomerstoprocessChallengeAuthentication</a><br><br>+ Exceptional Case (*1)</td></tr><tr><td>authentication_error</td><td>N</td><td>Authentication is <strong>Failed but retriable</strong><br>Authentication is executed but card holder failed to complete correctly (such as inputting wrong password).<br><br>+ Exceptional Case (*1)</td><td>Options<br>1.Request card holder to retry authentication and proceed it correctly.<br>2.Give up 3DS authentication and proceed normal Authorize request.<br></td></tr><tr><td>not_eligible_for_3d_secure</td><td>C, R</td><td>Authentication is <strong>Failed</strong> and non-retriable<br>Card issuer rejected to proceed 3DS authentication due to high risk.</td><td>Options<br>1.Request card holder to contact card issuer to resolve the issue first.<br>2.Give up 3DS authentication and proceed normal Authorize request.</td></tr><tr><td>connection_error</td><td>U</td><td>Authentication is <strong>Failed</strong>.<br>Whether it is retriable depends on cause.<br>Authentication could not be executed due to <strong>any issue NOT caused by card holder</strong> such as system error, or connection issue.<br><br>+ Exceptional Case (*1)</td><td>Options<br>1.Wait until issue is resolved.<br>2.Give up 3DS authentication and proceed normal Authorize request.</td></tr></tbody></table>
<p>(*1) In case of system trouble on ACS managed by NTTData, this status can be set by NTTData&#x27;s bypass. e.g.) VISA/JCB/AMEX/Diners → A, MasterCard → N, messageCategoryType=npa → U</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="response-header">Response Header<a href="#response-header" class="hash-link" aria-label="Direct link to Response Header" title="Direct link to Response Header">​</a></h2>
<table><thead><tr><th>Header</th><th>Value</th><th>Remarks</th></tr></thead><tbody><tr><td>Content-Type</td><td>application/json;charset=UTF-8</td><td>Before redirection</td></tr><tr><td>Content-Type</td><td>application/x-www-form-urlencoded</td><td>After redirection</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="response-parameter">Response Parameter<a href="#response-parameter" class="hash-link" aria-label="Direct link to Response Parameter" title="Direct link to Response Parameter">​</a></h2>
<table><thead><tr><th>Parameter</th><th>Required</th><th>Date Type</th><th>Description</th><th>Sample</th><th>Remark</th></tr></thead><tbody><tr><td>paymentResult</td><td>Yes</td><td></td><td>Base64 encoded of the request JSON</td><td></td><td></td></tr><tr><td>signature</td><td>Yes</td><td></td><td>HMAC SHA256 hash of the request JSON</td><td></td><td>Key for HMAC SHA256 hash will be provided by gpayment for each service</td></tr><tr><td>key_version</td><td>Yes</td><td></td><td>String request</td><td>&quot;1&quot;</td><td>A version for keyset used for the encryption and the authentication.<br>key_version is linked with service_id.</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sample-response-data-1">Sample Response Data<a href="#sample-response-data-1" class="hash-link" aria-label="Direct link to Sample Response Data" title="Direct link to Sample Response Data">​</a></h2>
<p><strong>After</strong> redirection SUCCESS (fully_authenticated)</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SUCCESS (fully_authenticated)</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;resultType&quot;:&quot;success&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;transactionTime&quot;:&quot;2021-08-23 12:42:14.726&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;reference&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;nttDataResult&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSMerchantTransID&quot;:&quot;NTDE2108231236493045U3RhUkUyFzYaHrWO&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSRequestorTransID&quot;:&quot;151180a8-3c4c-4eb2-bf14-8f890e67763f&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;nttDataAuthenticationResultResponse&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsReferenceNumber&quot;:&quot;3DS_LOA_ACS_NTDC_020100_00089&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsTransID&quot;:&quot;575d90ad-3873-498b-9133-380cbbc8d99b&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;authenticationValue&quot;:&quot;MTIzNDU2Nzg5MDA5ODc2NTQzMjE=&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;dsTransID&quot;:&quot;6afa6072-9412-446b-9673-2f98b3ee98a2&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;eci&quot;:&quot;05&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;messageVersion&quot;:&quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;threeDSServerTransID&quot;:&quot;dc9a400e-84b8-46c0-a778-3cd88bea1922&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatus&quot;:&quot;Y&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;enrollmentId&quot;:&quot;ch_6RM6NTEUH7R&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyRequestId&quot;:&quot;NTDE2108231236493045U3RhUkUyFzYaHrWO&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;threeDSecureAuthenticationStatus&quot;:&quot;fully_authenticated&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;threeDSecureAuthenticationResult&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;messageVersion&quot;:&quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;cavvAlgorithm&quot;:&quot;9&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;cavv&quot;:&quot;MTIzNDU2Nzg5MDA5ODc2NTQzMjE=&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;eci&quot;:&quot;05&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;transactionId&quot;:&quot; &quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;transactionStatus&quot;:&quot;Y&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;dsTransactionId&quot;:&quot;6afa6072-9412-446b-9673-2f98b3ee98a2&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;threeDSecureServerTransactionId&quot;:&quot;dc9a400e-84b8-46c0-a778-3cd88bea1922&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;callbackUrl&quot;:&quot;https://stg.online.checkout.rakuten.co.jp/payment/callback&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SUCCESS (eligible_for_3d_secure)</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;reference&quot;: {&quot;nttDataResult&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;threeDSRequestorTransID&quot;: &quot;a66c3760-146d-40db-9812-8a7b6b1868c5&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;nttDataAuthenticationResultResponse&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsReferenceNumber&quot;: &quot;3DS_LOA_ACS_NTDC_020100_00089&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsTransID&quot;: &quot;375d90ad-3873-498b-9133-380cbbc8d99a&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;dsTransID&quot;: &quot;6afa6072-9412-446b-9673-2f98b3ee98a1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;eci&quot;: &quot;06&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;messageVersion&quot;: &quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;authenticationValue&quot;: &quot;MTIzNDU2Nzg5MDA5ODc2NTQzMjE=&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatus&quot;: &quot;A&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;threeDSServerTransID&quot;: &quot;2cc6c01b-1aff-460a-82fe-d6c967d5179e&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;threeDSMerchantTransID&quot;: &quot;NTDE210629005052194mgWRBi59MrOMBcWQe&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    }},</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;enrollmentId&quot;: &quot;AUTO_21062900505162022QSprw4f587Afpk1Po2DkVqJZQJRE&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;threeDSecureAuthenticationResult&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;cavv&quot;: &quot;MTIzNDU2Nzg5MDA5ODc2NTQzMjE=&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;cavvAlgorithm&quot;: &quot;9&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;transactionStatus&quot;: &quot;A&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;dsTransactionId&quot;: &quot;6afa6072-9412-446b-9673-2f98b3ee98a1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;eci&quot;: &quot;06&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;messageVersion&quot;: &quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;threeDSecureServerTransactionId&quot;: &quot;2cc6c01b-1aff-460a-82fe-d6c967d5179e&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;transactionId&quot;: &quot; &quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;keyVersion&quot;: &quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;threeDSecureAuthenticationStatus&quot;: &quot;eligible_for_3d_secure&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyRequestId&quot;: &quot;NTDE210629005052194mgWRBi59MrOMBcWQe&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;callbackUrl&quot;: &quot;http://localhost&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyCode&quot;: &quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;transactionTime&quot;: &quot;2021-06-29 00:50:54.085&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;resultType&quot;: &quot;success&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SUCCESS (not_eligible_for_3d_secure)</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;reference&quot;: {&quot;nttDataResult&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;threeDSRequestorTransID&quot;: &quot;91faf7dc-7d63-4fce-878e-7c68c8bf600c&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;nttDataAuthenticationResultResponse&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsReferenceNumber&quot;: &quot;3DS_LOA_ACS_NTDC_020100_00089&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsTransID&quot;: &quot;375d90ad-3873-498b-9133-380cbbc8d99a&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;dsTransID&quot;: &quot;6afa6072-9412-446b-9673-2f98b3ee98a1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatusReason&quot;: &quot;12&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;messageVersion&quot;: &quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatus&quot;: &quot;R&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;threeDSServerTransID&quot;: &quot;b790d57b-2f39-45d4-b06b-3bf7ccc82dd3&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;messageDigest&quot;: &quot;1033FB00DBDC65CDAD6593C979C79FF7CD293283F96FD9EC37C72C481CAEE6C702&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        &quot;threeDSMerchantTransID&quot;: &quot;NTDE210629020219311yBhmvV5eo0PFE3aJz&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    }},</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;enrollmentId&quot;: &quot;AUTO_210629020217390ezOA2LySCdb1EnnFA447YCx7SMPJVF&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;keyVersion&quot;: &quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;threeDSecureAuthenticationStatus&quot;: &quot;not_eligible_for_3d_secure&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyRequestId&quot;: &quot;NTDE210629020219311yBhmvV5eo0PFE3aJz&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;callbackUrl&quot;: &quot;http://localhost&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyCode&quot;: &quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;transactionTime&quot;: &quot;2021-06-29 02:02:21.059&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;resultType&quot;: &quot;success&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Authentication Rejected, Issuer is rejecting</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;resultType&quot;:&quot;success&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;transactionTime&quot;:&quot;2022-04-18 11:10:20.341&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;reference&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;nttDataResult&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSMerchantTransID&quot;:&quot;NTDE2204181110159919ruD1wfAOYZBNsvzq&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSRequestorTransID&quot;:&quot;240e3646-e87b-4fb3-9196-15b948ab8d84&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;nttDataAuthenticationResultResponse&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsReferenceNumber&quot;:&quot;3DS_LOA_ACS_NTDC_020200_00394&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsTransID&quot;:&quot;147151dc-bdaa-41bd-bc39-a47175d76bd7&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;dsReferenceNumber&quot;:&quot;VISA.V 17 0003&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;dsTransID&quot;:&quot;1c81516a-966e-455c-ae9f-d95d9fb0ea27&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;eci&quot;:&quot;07&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;messageVersion&quot;:&quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;threeDSServerTransID&quot;:&quot;4d013ca7-8fb5-4dba-bd20-c5043d0632c6&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatus&quot;:&quot;R&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatusReason&quot;:&quot;13&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;enrollmentId&quot;:&quot;RT00003WLLSP_E&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyRequestId&quot;:&quot;NTDE2204181110159919ruD1wfAOYZBNsvzq&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;threeDSecureAuthenticationStatus&quot;:&quot;not_eligible_for_3d_secure&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;callbackUrl&quot;:&quot;https://ticket.rakuten.co.jp/lots/payment/card/confirm&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Transaction was declined with high risk result on RBA(Risk-Based Authentication). In that case Card Setting need to change.</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;resultType&quot;:&quot;success&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;transactionTime&quot;:&quot;2022-01-20 03:03:10.116&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;reference&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;nttDataResult&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSMerchantTransID&quot;:&quot;NTDE220120030301770NH596PxfvdKnjH5l2&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSRequestorTransID&quot;:&quot;4d07098b-765e-4993-a956-162dca84ce0c&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;nttDataAuthenticationResultResponse&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsReferenceNumber&quot;:&quot;3DS_LOA_ACS_NTDC_020100_00089&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsTransID&quot;:&quot;f9cba6c4-4680-4b0e-815c-996a4b9990c3&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;dsTransID&quot;:&quot;9c002bd4-9b2b-455a-8d2d-e0b7b7b6fd65&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;messageVersion&quot;:&quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;threeDSServerTransID&quot;:&quot;37dd99eb-197c-470f-9b89-a8fe290a9005&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatus&quot;:&quot;N&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatusReason&quot;:&quot;19&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;enrollmentId&quot;:&quot;dc-1250001046-220120-0001364862&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyRequestId&quot;:&quot;NTDE220120030301770NH596PxfvdKnjH5l2&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;threeDSecureAuthenticationStatus&quot;:&quot;authentication_error&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;callbackUrl&quot;:&quot;https://my.checkout.rakuten.co.jp/myc/purchase/OrderDispatch?actionType=threed.secure&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyRequestId&quot;:&quot;NTDE211019003548117k42EaLZUDvrRKPz7L&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;callbackUrl&quot;:&quot;https://my.checkout.rakuten.co.jp/wwwcheck.html?actionType=threed.secure&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;enrollmentId&quot;:&quot;dc-1250000236-211019-0000000001&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;reference&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;nttDataResult&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;nttDataAuthenticationResultResponse&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsReferenceNumber&quot;:&quot;3DS_LOA_ACS_NTDC_020200_00394&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsTransID&quot;:&quot;58c6c8da-503f-420a-975c-870d6b3eb30b&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;dsReferenceNumber&quot;:&quot;VISA.V 17 0003&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;dsTransID&quot;:&quot;31dea4ea-b0c0-4654-b9c5-718a3fb029bd&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;eci&quot;:&quot;07&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;messageVersion&quot;:&quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;threeDSServerTransID&quot;:&quot;955fe1b3-fa66-4c21-b235-451f16fe13ad&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatus&quot;:&quot;N&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;transStatusReason&quot;:&quot;15&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSMerchantTransID&quot;:&quot;NTDE211019003548117k42EaLZUDvrRKPz7L&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSRequestorTransID&quot;:&quot;cf759a28-0bdf-49e8-bd24-370e806ce216&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;resultType&quot;:&quot;success&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;threeDSecureAuthenticationStatus&quot;:&quot;authentication_error&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;transactionTime&quot;:&quot;2021-10-19 00:38:36.946&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Error Code;402 , Error Component: A</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;resultType&quot;:&quot;success&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;transactionTime&quot;:&quot;2021-10-10 22:29:33.374&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;reference&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;nttDataResult&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSMerchantTransID&quot;:&quot;NTDE211010222838477wEjGaSig0yn73213D&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;threeDSRequestorTransID&quot;:&quot;c06c96a3-12db-4988-8dfe-4f333b22f03c&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         &quot;nttDataAuthenticationResultResponse&quot;:{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;acsTransID&quot;:&quot;29209321-3000-4000-a001-001000322674&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;dsTransID&quot;:&quot;9948c97e-1dfe-4db2-8d67-15e461758d18&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorCode&quot;:&quot;402&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorComponent&quot;:&quot;A&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorDescription&quot;:&quot;Transaction Timed Out&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorDetail&quot;:&quot;Message not received in allotted time&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorMessageType&quot;:&quot;CReq&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;messageVersion&quot;:&quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;threeDSServerTransID&quot;:&quot;bb2b79d1-9f4a-4728-ae59-36ee2daaf82d&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">         }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;keyVersion&quot;:&quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;serviceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;subServiceId&quot;:&quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;enrollmentId&quot;:&quot;ch_6Y42BHJ49X2-85ea8bfd7b894099ae83485cbd981ca5&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyCode&quot;:&quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;agencyRequestId&quot;:&quot;NTDE211010222838477wEjGaSig0yn73213D&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;threeDSecureAuthenticationStatus&quot;:&quot;connection_error&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   &quot;callbackUrl&quot;:&quot;https://online.checkout.rakuten.co.jp/payment/callback&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">&quot;nttDataAuthenticationResultResponse&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorComponent&quot;: &quot;D&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorDescription&quot;: &quot;ISO code not valid per ISO tables (for either country or currency), or code is one of the excluded values listed in Table A.5.&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorCode&quot;: &quot;304&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorDetail&quot;: &quot;billAddrState&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;errorMessageType&quot;: &quot;AReq&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;messageVersion&quot;: &quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            &quot;threeDSServerTransID&quot;: &quot;32b35403-bccf-40a4-aa56-0eb44b19aee5&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        },</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>For VeritransJP, please refer to <a href="/guides/agency/veritrans_japan/#3DS2RequestandResponsesample">Agency(Veritrans Japan)#3DS2RequestandResponsesample</a></strong></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="authentication-timeout">Authentication Timeout<a href="#authentication-timeout" class="hash-link" aria-label="Direct link to Authentication Timeout" title="Direct link to Authentication Timeout">​</a></h2>
<p>The life cycle of the enrollment check process is estimated to be concluded (user inputs the authentication and click submit) within <strong>20 minutes (*1)</strong>, however considering callback delay, PGW will accept callback (<strong>tolerance</strong>) from browser to up <strong>to 24hrs (*2)</strong>.</p>
<p>During this period, PGW returns as failure (refer sample as below).</p>
<p>FAILURE (aborted payment)</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">FAILURE</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;enrollmentId&quot;: &quot;AUTO_210629020629569zzmUEeWq4dWRu73i8DZWNdHIjaMvNw&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;keyVersion&quot;: &quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;errorMessage&quot;: &quot;3DS authentication timed out&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;errorCode&quot;: &quot;aborted_payment&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyRequestId&quot;: &quot;NTDE210629020629859tsfTFfihiAQsVgeak&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;callbackUrl&quot;: &quot;http://localhost&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;agencyCode&quot;: &quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;transactionTime&quot;: &quot;2021-06-29 02:07:31.109&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;resultType&quot;: &quot;failure&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>Before the transaction is considered as expired (*1)</th><th>tolerance (*2)</th><th>After tolerane</th></tr></thead><tbody><tr><td>PGW returns the result to service.<br>This is the typical scenario.</td><td>PGW returns failure aborted_payment</td><td>PGW does NOT return to services.</td></tr></tbody></table>
<p>Since enrollment check does not involve authorization (only authentication), it&#x27;s up to services to decide to &quot;ignore&quot; callback during the tolerance.</p>
<table><thead><tr><th>Agency</th><th>wait time (*1)</th></tr></thead><tbody><tr><td>rekutencard</td><td>20 minutes</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="33-call-authorize-authorizeandcapture-with-authentication-result">(3/3) Call Authorize, AuthorizeAndCapture with Authentication Result<a href="#33-call-authorize-authorizeandcapture-with-authentication-result" class="hash-link" aria-label="Direct link to (3/3) Call Authorize, AuthorizeAndCapture with Authentication Result" title="Direct link to (3/3) Call Authorize, AuthorizeAndCapture with Authentication Result">​</a></h2>
<p>When threeDSecureAuthenticationStatus is &quot;fully_authenticated&quot; or &quot;eligible_for_3d_secure&quot;, the response has <font color="Red">&quot;threeDSecureAuthenticationResult&quot;</font> which is the 3DS authentication result to use for the Authorize API request. Please set threeDSecureAuthenticationResult to cardToken, as cardToken.threeDSecureAuthenticationResult. *Please check &quot;Sample of Request Data for Authorize&quot;</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="available-api">Available API<a href="#available-api" class="hash-link" aria-label="Direct link to Available API" title="Direct link to Available API">​</a></h4>
<ul>
<li>/Payment/V1/Authorize</li>
<li>/Payment/V1/AuthorizeAndCapture</li>
<li>/Payment/V1/Authorize/HTML</li>
<li>/Payment/V1/AuthorizeAndCapture/HTML</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sample-of-request-data-for-authorize">Sample of Request Data for Authorize<a href="#sample-of-request-data-for-authorize" class="hash-link" aria-label="Direct link to Sample of Request Data for Authorize" title="Direct link to Sample of Request Data for Authorize">​</a></h3>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Request Sample for Authorize API</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  &quot;serviceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  &quot;subServiceId&quot;: &quot;stg-all-webportal&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  &quot;paymentId&quot;: &quot;sVlHkv8CiYbEHK4BrhXWgEPpcDx8j&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  &quot;timestamp&quot;: &quot;2021-05-07 08:52:43.268&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  &quot;agencyCode&quot;: &quot;rakutencard&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  &quot;currencyCode&quot;: &quot;JPY&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  &quot;grossAmount&quot;: &quot;100&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  &quot;order&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;version&quot;: &quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;email&quot;: &quot;test@rakuten.com&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;ipAddress&quot;: &quot;123.123.123.123&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  },</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  &quot;cardToken&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;version&quot;: &quot;1&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;amount&quot;: &quot;100&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;cardTokenValue&quot;: &quot;21040823001IrYJWeEU7V5V4wHGl0007&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;withThreeDSecure&quot;: &quot;false&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      &quot;threeDSecureAuthenticationResult&quot;: {</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          &quot;cavv&quot;: &quot;MTIzNDU2Nzg5MDA5ODc2NTQzMjE=&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          &quot;cavvAlgorithm&quot;: &quot;9&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          &quot;transactionStatus&quot;: &quot;Y&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          &quot;dsTransactionId&quot;: &quot;6afa6072-9412-446b-9673-2f98b3ee98a2&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          &quot;eci&quot;: &quot;05&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          &quot;messageVersion&quot;: &quot;2.1.0&quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          &quot;transactionId&quot;: &quot; &quot;,</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          &quot;threeDSecureServerTransactionId&quot;: &quot;20217659-d43f-4160-be4b-4131df463fc7&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  }</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="document">Document<a href="#document" class="hash-link" aria-label="Direct link to Document" title="Direct link to Document">​</a></h2>
<ul>
<li><a href="/support/">B014-10-00-16_3DS_Connector接続条件書_業務共通編_第1.6版.pdf</a></li>
<li><a href="/guides/agency/nttdata/"><strong>Agency(NTT Data)</strong></a></li>
<li><a href="/guides/agency/veritrans_japan/">Agency(Veritrans Japan)</a></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3ds20_qa">3DS2.0_Q&amp;A<a href="#3ds20_qa" class="hash-link" aria-label="Direct link to 3DS2.0_Q&amp;A" title="Direct link to 3DS2.0_Q&amp;A">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="q-which--params-to-keep-in-clients-db">Q: Which  params to keep in Clients DB?<a href="#q-which--params-to-keep-in-clients-db" class="hash-link" aria-label="Direct link to Q: Which  params to keep in Clients DB?" title="Direct link to Q: Which  params to keep in Clients DB?">​</a></h3>
<p>A: If you are going to reuse the 3DS authentication, it is better to store those information</p>
<ul>
<li>agencyRequestId</li>
<li>cardToken</li>
<li>(enrollmentId, paymentId)</li>
<li>threeDSecureAuthenticationResult.cavv</li>
<li>threeDSecureAuthenticationResult.transactionId</li>
<li>threeDSecureAuthenticationResult.dsTransactionId</li>
<li>threeDSecureAuthenticationResult.threeDSecureServerTransactionId</li>
<li>messageVersion</li>
<li>eci</li>
<li>transactionStatus</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/products/paymentmethod/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Payment Method</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/guides/3dsecure2/htmlapiguideline/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">3DS2.0 - HTML API Guideline on STG Testing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#apiTitleName" class="table-of-contents__link toc-highlight">3DSecureEnrollment/V2/Check</a></li><li><a href="#purpose" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#call-flow" class="table-of-contents__link toc-highlight">Call Flow</a><ul><li><a href="#iframe-basis-authentication-under-construction" class="table-of-contents__link toc-highlight">iframe-basis authentication (<font>under-construction</font>)</a></li></ul></li><li><a href="#supported-psp" class="table-of-contents__link toc-highlight">Supported PSP</a></li><li><a href="#api-endpoint" class="table-of-contents__link toc-highlight">API Endpoint</a></li><li><a href="#request-data" class="table-of-contents__link toc-highlight">Request Data</a><ul><li><a href="#http-method" class="table-of-contents__link toc-highlight">HTTP Method</a></li><li><a href="#request-header" class="table-of-contents__link toc-highlight">Request Header</a></li><li><a href="#request-parameters" class="table-of-contents__link toc-highlight">Request Parameters</a></li><li><a href="#request-data-1" class="table-of-contents__link toc-highlight">Request Data</a><ul><li><a href="#1-the-required-field-combination-is-as-follows" class="table-of-contents__link toc-highlight">(*1) The required field combination is as follows</a></li><li><a href="#sample-of-request-data" class="table-of-contents__link toc-highlight">Sample of Request Data</a></li></ul></li></ul></li><li><a href="#13-response-data-of-phase-1-before-redirection" class="table-of-contents__link toc-highlight">(1/3) Response Data of Phase 1 (Before redirection)</a></li><li><a href="#1-3d-secure-verification-status" class="table-of-contents__link toc-highlight">(*1) 3D Secure Verification Status</a></li><li><a href="#sample-response-data" class="table-of-contents__link toc-highlight">Sample Response Data</a><ul><li><a href="#failure-invalid_request_parameter" class="table-of-contents__link toc-highlight">FAILURE (invalid_request_parameter)</a></li></ul></li><li><a href="#23-response-data-of-phase-2-after-redirection" class="table-of-contents__link toc-highlight">(2/3) Response Data of Phase 2 (After redirection)</a></li><li><a href="#1-3d-secure-verification-status-1" class="table-of-contents__link toc-highlight">(*1) 3D Secure Verification Status</a></li><li><a href="#response-header" class="table-of-contents__link toc-highlight">Response Header</a></li><li><a href="#response-parameter" class="table-of-contents__link toc-highlight">Response Parameter</a></li><li><a href="#sample-response-data-1" class="table-of-contents__link toc-highlight">Sample Response Data</a></li><li><a href="#authentication-timeout" class="table-of-contents__link toc-highlight">Authentication Timeout</a></li><li><a href="#33-call-authorize-authorizeandcapture-with-authentication-result" class="table-of-contents__link toc-highlight">(3/3) Call Authorize, AuthorizeAndCapture with Authentication Result</a><ul><li><a href="#available-api" class="table-of-contents__link toc-highlight">Available API</a></li><li><a href="#sample-of-request-data-for-authorize" class="table-of-contents__link toc-highlight">Sample of Request Data for Authorize</a></li></ul></li><li><a href="#document" class="table-of-contents__link toc-highlight">Document</a></li><li><a href="#3ds20_qa" class="table-of-contents__link toc-highlight">3DS2.0_Q&amp;A</a><ul><li><a href="#q-which--params-to-keep-in-clients-db" class="table-of-contents__link toc-highlight">Q: Which  params to keep in Clients DB?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Rakuten Group</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://privacy.rakuten.co.jp/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/support/terms-of-use/">Terms of Use</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Rakuten Group Inc.</div></div></div></footer></div>
</body>
</html>