<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial/PayvaultandInfovault/paayvault-and-infovault-api-implementation-guideline" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">PayVault and InfoVault API Implementation Guideline | Rakuten Payment Platform Documentation Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.payment.global.rakuten.com/guides/payvault/implemntation-guide/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="PayVault and InfoVault API Implementation Guideline | Rakuten Payment Platform Documentation Portal"><meta data-rh="true" name="description" content="PayVault and InfoVault API Implementation Guideline | Rakuten Payment Platform Documentation Portal"><meta data-rh="true" property="og:description" content="PayVault and InfoVault API Implementation Guideline | Rakuten Payment Platform Documentation Portal"><link data-rh="true" rel="icon" href="/img/logoR.png"><link data-rh="true" rel="canonical" href="https://docs.payment.global.rakuten.com/guides/payvault/implemntation-guide/"><link data-rh="true" rel="alternate" href="https://docs.payment.global.rakuten.com/guides/payvault/implemntation-guide/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.payment.global.rakuten.com/ja/guides/payvault/implemntation-guide/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://docs.payment.global.rakuten.com/guides/payvault/implemntation-guide/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HRVS4580AM-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/release-note-blog/rss.xml" title="Rakuten Payment Platform Documentation Portal RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/release-note-blog/atom.xml" title="Rakuten Payment Platform Documentation Portal Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RE7H19L577"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RE7H19L577",{anonymize_ip:!0})</script>












<link rel="search" type="application/opensearchdescription+xml" title="Rakuten Payment Platform Documentation Portal" href="/opensearch.xml">




<link rel="stylesheet" href="/vendor/bootstrap/css/bootstrap.min-ec3bb52a00e176a7181d454dffaea219.css">
<link rel="stylesheet" href="/vendor/metisMenu/css/metisMenu.min-bb3f6f86f3feb94b2ba7b43c9d315c54.css">
<link rel="stylesheet" href="/css/developer_tool-c89ff5e2e123a5655767d765e09d1f73.css">
<link rel="stylesheet" href="/css/loader-14604e38937c8d26ac916bf28f2a9f9b.css">
<link rel="stylesheet" href="/css/webportal-4d03e6d97e3053f274e2592b8d9b57656cbd3555.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jotted@latest/jotted.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer="defer"></script>
<script src="https://cdn.jsdelivr.net/npm/jotted@latest/jotted.min.js" defer="defer"></script>
<script src="/vendor/bootstrap/js/bootstrap.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js" defer="defer"></script>
<script src="/js/jquery-dateFormat.min-95766bbf0f6b9ef23609620a13d09777.js" defer="defer"></script>
<script src="/js/devtool-common-9dea6bf50ccb01e308540d56d8b874f2.js" defer="defer"></script>
<script src="/js/hmac-sha256-e355334677dcf7e7b062c1e1aff8e36d.js" defer="defer"></script>
<script src="/js/base64-ae4086f4bc9b991b8ac94e25878e29b9.js" defer="defer"></script>
<script src="/js/aes-d57c122164557ff2dca90400c4744648.js" defer="defer"></script>
<script src="/js/dialog-9d47d91af9f0a88581e24b4d9f4e1cb1.js" defer="defer"></script>
<script src="/js/devtool-submit-862a00f15d42f9e8518c299469c19ef6.js" defer="defer"></script>
<script src="/js/devtool-authorize-771a0bdbc9b763daf235ecd6920116d5.js" defer="defer"></script>
<script src="/js/devtool-authorizecapture-617244bc322de2914aa86f13dbffebaf.js" defer="defer"></script>
<script src="/js/devtool-capture-d6ce015f67d7d8449f77e86f43dc532e.js" defer="defer"></script>
<script src="/js/devtool-cancelRefund-a49c18f1d89ca83450f8e705e0e7a6c3.js" defer="defer"></script>
<script src="/js/devtool-partialrefund-c88324e6562658a68361c3934d0aa98c.js" defer="defer"></script>
<script src="/js/devtool-find-f2e6910b7c01bddeacd7e8d5148eb041.js" defer="defer"></script>
<script src="/js/devtool-modify-0dd4b07cec2d1a7a111d8b3c024423aa.js" defer="defer"></script>
<script src="/js/encrypt-decrypt-tool-6a519772f0093588b32923ebf96ddf29.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.0e845cde.css">
<script src="/assets/js/runtime~main.aa8ddc73.js" defer="defer"></script>
<script src="/assets/js/main.56c25086.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="headerSub relative flex text-xs items-center justify-between sm:h-8 lg:justify-start" aria-label="Global"><div class="hidden w-full md:flex md:ml-5 md:pr-5 md:space-x-5"><a href="https://payment.rakuten.co.jp/" class="hidden font-medium text-gray-500 hover:text-gray-900">Rakuten Payment</a><a href="https://global.rakuten.com/corp/" class="hidden font-medium text-gray-500 hover:text-gray-900">Rakuten Group</a><a href="/logout/" style="margin-left:auto" class="btnLogin inline-block font-medium text-sky-500 hover:text-white hover:bg-sky-500 px-2 mr-5 border-sky-500 border-2">Log out</a></div></div><div class="relative flex text-xs items-center justify-between sm:h-8 lg:justify-start" aria-label="Global"><div class="hidden w-full md:flex md:ml-5 md:pr-5 md:space-x-5"><img class="h-6" src="/img/logoR.svg" alt=""><div class="nameSiteTitle font-serif h-8 text-base font-bold uppercase"><span>Rakuten Payment Platform Documentation Portal</span></div></div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Home</b></a><a class="navbar__item navbar__link" href="/guides/intro/card/">Guides</a><a class="navbar__item navbar__link" href="/products/api-reference/">Products</a><a class="navbar__item navbar__link" href="/release-note-blog/">Release notes</a><a class="navbar__item navbar__link" href="/release-notes/">Release notes</a><a class="navbar__item navbar__link" href="/support/">Support</a><a class="navbar__item navbar__link" href="/faq/dashboard/">FAQ</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/guides/payvault/implemntation-guide/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/ja/guides/payvault/implemntation-guide/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><b>Home</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/product/">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/intro/card/">Development Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/products/pgw3/">Products&amp;APIs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/pgw3/">Payment Gateway API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/payvault/">PayVault JS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/cvs_specifications/">CVS Payment API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/rakutenpay/">Rakuten Pay API</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/paymentstep/">Page Not Found</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/cardupdater_specifications/">Page Not Found</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/products/bulkcapture/">Page Not Found</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/paymentstepcreateurlspec/">Payment Step Create URL API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/payvault/">PayVault API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/common-specifications/api-common/">Common Specifications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/products/api-reference/pgw3/">Payment Gateway API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/3dsecure2/">3D Secure 2.0</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/guides/payvault/">PayVault</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/guides/payvault/">PayVault.js</a><button aria-label="Expand sidebar category &#x27;PayVault.js&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/guides/payvault/implemntation-guide/">PayVault API</a><button aria-label="Collapse sidebar category &#x27;PayVault API&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/products/api-reference/payvault/">API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/products/payvault/">Extra</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/payvault/cit-guidelines/">CIT Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/payvault/supported-issuer-code/">Supported Issuer Code and Card Type</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/payvault/card-number-validation-rule/">Card Number Validation Rule</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/infovault-implementation-guideline/">InfoVault</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/paymentstep/paymentstep_integrationguide/">Payment Step</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/BulkCapture/authorize/">Bulk Capture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/TestInformation/under/">Test Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/cardupdater/card-expiration-date-validation-rule/">Card Updater</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/guides/Remittance_Gateway/">Remittance Gateway</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/library/">Playground</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/cardpayment_testguideline/">Testing Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/sellerportal_introduction/">Seller Portal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/faq/dashboard/">FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/release-note-blog/">Release Notes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/release-notes/">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/support/">Support Desk</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/support/">Support</a><button aria-label="Expand sidebar category &#x27;Support&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Products&amp;APIs</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">PayVault</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">PayVault API</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>PayVault and InfoVault API Implementation Guideline</h1></header>
<div class="tableOfContentsInline_prmo"><ul class="table-of-contents"><li><a href="#api-if-specification">API IF Specification</a></li><li><a href="#authentication">Authentication</a><ul><li><a href="#algorithms--terms">Algorithms &amp;&amp; Terms</a></li><li><a href="#how-to-sign-request-json">How to sign request JSON</a></li><li><a href="#how-to-check-response-signature">How to check response signature</a></li></ul></li><li><a href="#error-codes">Error Codes</a></li><li><a href="#http-status-codes">HTTP Status Codes</a><ul><li><a href="#sample-implementation">Sample Implementation</a></li></ul></li></ul></div>
<br>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>IP caching</div><div class="admonitionContent_BuS1"><p>As a common practice, IPs are dynamically allocated so please make sure that you cache IPs based on ttl which is retained by the DNS server.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="api-if-specification">API IF Specification<a href="#api-if-specification" class="hash-link" aria-label="Direct link to API IF Specification" title="Direct link to API IF Specification">​</a></h2>
<p>PayVault provides a set of APIs that can be called by your service in order to perform create, modify, or inquiry operations in the PayVault. Here is the links of IF specification of these APIs:</p>
<ul>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V1-Add/post">/api/pv/Card/V1/Add</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V1-AddPlus/post">/api/pv/Card/V1/AddPlus</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V1-Delete/post">/api/pv/Card/V1/Delete</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V1-Forward/post">/api/pv/Card/V1/Forward</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V1-ForwardResponse/post">/api/pv/Card/V1/ForwardResponse</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V1-Get/post">/api/pv/Card/V1/Get</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V1-Redeem/post">/api/pv/Card/V1/Redeem</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V1-Update/post">/api/pv/Card/V1/Update</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V2-Add/post">/api/pv/Card/V2/Add</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V2-AddPlus/post">/api/pv/Card/V2/AddPlus</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V2-Delete/post">/api/pv/Card/V2/Delete</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V2-Forward/post">/api/pv/Card/V2/Forward</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V2-Get/post">/api/pv/Card/V2/Get</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V2-Redeem/post">/api/pv/Card/V2/Redeem</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V3-Add/post">/api/pv/Card/V3/Add</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V3-Get/post">/api/pv/Card/V3/Get</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Card-V4-Add/post">/api/pv/Card/V4/Add</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Edy-Card-V1-Forward/post">/api/pv/edy/Card/V1/Forward</a></li>
<li><a href="/products/api-reference/infovault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1File-V1-Add/post">/api/pv/File/V1/Add</a></li>
<li><a href="/products/api-reference/infovault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1File-V1-Delete/post">/api/pv/File/V1/Delete</a></li>
<li><a href="/products/api-reference/infovault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1File-V1-Get/post">/api/pv/File/V1/Get</a></li>
<li><a href="/products/api-reference/infovault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1File-V1-Redeem/post">/api/pv/File/V1/Redeem</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Fingerprint-V1-Get/post">/api/pv/Fingerprint/V1/Get</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Kdreams-Card-V1-Forward/post">/api/pv/kdreams/Card/V1/Forward</a></li>
<li><a href="/products/api-reference/infovault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Text-V1-Add/post">/api/pv/Text/V1/Add</a></li>
<li><a href="/products/api-reference/infovault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Text-V1-Redeem/post">/api/pv/Text/V1/Redeem</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Toto-Card-V1-Forward/post">/api/pv/toto/Card/V1/Forward</a></li>
<li><a href="/products/api-reference/payvault/#tag/Credit-Card-Rakuten-Card/paths/~1Credit%20Card~1Toto-Card-V2-Forward/post">/api/pv/toto/Card/V2/Forward</a></li>
<li>[Draft] /api/pv/Card/V2/ForwardResponse</li>
<li>[Draft] /api/pv/Card/V2/Update</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="authentication">Authentication<a href="#authentication" class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication">​</a></h2>
<p>Authenticate your request with HMAC key when using the API by including your signature in the request. The HMAC is issued by PayVault team and shared with you in advance. Your HMAC keys carry many privileges, so be sure to keep them secret! Do not share your HMAC keys in publicly accessible areas such GitHub, client-side code, and so forth.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="algorithms--terms">Algorithms &amp;&amp; Terms<a href="#algorithms--terms" class="hash-link" aria-label="Direct link to Algorithms &amp;&amp; Terms" title="Direct link to Algorithms &amp;&amp; Terms">​</a></h3>
<p>This table shows the algorithm is used for authentication :</p>
<table><thead><tr><th>Hmac Algorithm</th><th>HmacSHA256</th></tr></thead><tbody><tr><td>Charset</td><td>UTF-8</td></tr><tr><td>Key</td><td>It is provided by PayVault team, then shared by the service and PayVault team</td></tr><tr><td>Key Version</td><td>Version of a previously shared key</td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-sign-request-json">How to sign request JSON<a href="#how-to-sign-request-json" class="hash-link" aria-label="Direct link to How to sign request JSON" title="Direct link to How to sign request JSON">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="definition">Definition<a href="#definition" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition">​</a></h4>
<p>When you send request to target APIs as above, you need to append signature with request, which is calculated with key and message.</p>
<p>The key is provided by PayVault team, then shared by the service and PayVault team.</p>
<p>The message is the whole request JSON string.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<p>Suppose the request JSON that is message of input of Hmac is as follows.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;serviceId&quot;:&quot;demo48&quot;, &quot;timestamp&quot;:&quot;2013-04-18 01:50:00.123&quot;, &quot;cardToken&quot;:&quot;1146516001DkcFD7mKElkQ5fu2gi1111&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Assuming the current key version is &quot;1&quot; and the corresponding authentication key is &quot;F82EFA4A5AC542FD61ED26173543A1776D07C47D9935D05AEB168BF637AAC687&quot;.</p>
<p>The signature that is calculated with key and message will be: &quot;f808624af752a1ac8e815eb5ad65743f0b0cab1c64f4f527eafb77c3c7dd9994&quot;</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-check-response-signature">How to check response signature<a href="#how-to-check-response-signature" class="hash-link" aria-label="Direct link to How to check response signature" title="Direct link to How to check response signature">​</a></h3>
<p>When using Add card API via payvault.js, in order to ensure the response you got was not tampered, you have to check the signature appended to the response.</p>
<p>The procedure is similar to the signature creation explained above for /api/pv/Card/V1/Get,  /api/pv/Card/V1/Update and  /api/pv/Card/V1/Delete. After calculating the signature, you must compare it to the signature in the response.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="definition-1">Definition<a href="#definition-1" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition">​</a></h4>
<p>For responses with resultType=&quot;success&quot;, the signature is calculated with key and message.</p>
<p>The key is provided by PayVault team, then shared by the service and PayVault team.</p>
<p>The message is a string defined as a concatenation of the relevant parameter names and values, separated by a semicolon (&quot;;&quot;). Each value is enclosed by double quotes (&#x27;&quot;&#x27;).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="apipvcardv1add">/api/pv/Card/V1/Add<a href="#apipvcardv1add" class="hash-link" aria-label="Direct link to /api/pv/Card/V1/Add" title="Direct link to /api/pv/Card/V1/Add">​</a></h4>
<p>message = &quot;timestamp=&quot; + timestamp + &quot;;cardToken=&quot; + cardToken + &quot;;iin=&quot; + iin + &quot;;last4digits=&quot; + last4digits + &quot;;expirationMonth=&quot; + expirationMonth + &quot;;expirationYear=&quot; + expirationYear + &quot;;brandCode=&quot; + brandCode
Since a service might have more than one valid key at the same time, the response also specifies the key used to calculate the signature.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="apipvcardv2add">/api/pv/Card/V2/Add<a href="#apipvcardv2add" class="hash-link" aria-label="Direct link to /api/pv/Card/V2/Add" title="Direct link to /api/pv/Card/V2/Add">​</a></h4>
<p>message = &quot;timestamp=&quot; + timestamp + &quot;;cardToken=&quot; + cardToken + &quot;;iin=&quot; + iin + &quot;;last4digits=&quot; + last4digits + &quot;;expirationMonth=&quot; + expirationMonth + &quot;;expirationYear=&quot; + expirationYear + &quot;;brandCode=&quot; + brandCode + &quot;;issuerCode=&quot; + issuerCode + &quot;;cardType=&quot; + cardType.</p>
<p>IssuerCode and cardType are optional fields, if issuerCode or cardType cannot be found, the fields should not exist in response message.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="apipvcardv3add">/api/pv/Card/V3/Add<a href="#apipvcardv3add" class="hash-link" aria-label="Direct link to /api/pv/Card/V3/Add" title="Direct link to /api/pv/Card/V3/Add">​</a></h4>
<p>message = &quot;timestamp=&quot; + timestamp + &quot;;cardToken=&quot; + cardToken + &quot;;iin=&quot; + iin + &quot;;last4digits=&quot; + last4digits + &quot;;expirationMonth=&quot; + expirationMonth + &quot;;expirationYear=&quot; + expirationYear + &quot;;brandCode=&quot; + brandCode + &quot;;issuerCode=&quot; + issuerCode + &quot;;cardType=&quot; + cardType + &quot;;cvvToken=&quot; + cvvToken.</p>
<p>message = &quot;timestamp=&quot; + timestamp + &quot;;cvvToken=&quot; + cvvToken.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="apipvcardv4add">/api/pv/Card/V4/Add<a href="#apipvcardv4add" class="hash-link" aria-label="Direct link to /api/pv/Card/V4/Add" title="Direct link to /api/pv/Card/V4/Add">​</a></h4>
<p>message = &quot;timestamp=&quot; + timestamp + &quot;;cardToken=&quot; + cardToken + &quot;;iin=&quot; + iin + &quot;;last4digits=&quot; + last4digits + &quot;;expirationMonth=&quot; + expirationMonth + &quot;;expirationYear=&quot; + expirationYear + &quot;;brandCode=&quot; + brandCode + &quot;;issuerCode=&quot; + issuerCode + &quot;;cardType=&quot; + cardType + &quot;;countryCode=&quot; + countryCode + &quot;;cvvToken=&quot; + cvvToken.</p>
<p>message = &quot;timestamp=&quot; + timestamp + &quot;;cvvToken=&quot; + cvvToken.</p>
<p>IssuerCode and cardType are optional fields, if issuerCode or cardType cannot be found, the fields should not exist in response message.</p>
<p>countryCode needs contract with external service provider.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>In case of V2, V3 and V4 Add Card</div><div class="admonitionContent_BuS1"><p>When generating the signature, you have to consider all 3 possible cases:</p><ul>
<li>No issuerCode and no cardType returned (for example using 4111-1111-1111-1111)</li>
<li>Only issuerCode returned (for example using 4923-7101-0000-0009)</li>
<li>Both issuerCode and cardType returned (for example using 3777-8274-3183-426 )</li>
</ul></div></div>
<p>For responses with resultType=&quot;failure&quot;, no signature is sent.</p>
<br>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-for-version-1-and-2-payvaultjs-which-uses-apipvcardv1add">Example for version 1 and 2 payvault.js which uses /api/pv/Card/V1/Add<a href="#example-for-version-1-and-2-payvaultjs-which-uses-apipvcardv1add" class="hash-link" aria-label="Direct link to Example for version 1 and 2 payvault.js which uses /api/pv/Card/V1/Add" title="Direct link to Example for version 1 and 2 payvault.js which uses /api/pv/Card/V1/Add">​</a></h4>
<p>Suppose the reply is as follows:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;resultType&quot;: &quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;timestamp&quot;:&quot;2014-01-01 12:00:00.133&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;maskedCardDetails&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cardToken&quot;: &quot;14010112001asdklfjasldkfjasx1111&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;iin&quot;: &quot;444433&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;last4digits&quot;: &quot;1111&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;expirationMonth&quot;: &quot;12&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;expirationYear&quot;: &quot;2020&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;brandCode&quot;: &quot;Visa&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;signature&quot; : &quot;363a42aabeb53cfe79deb948d7ae33c797f7b12641308c0b78f6847477f36842&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;keyVersion&quot; : &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The message that is the input to Hmac is:</p>
<p>message = &#x27;timestamp=&quot;2014-01-01 12:00:00.133&quot;;cardToken=&quot;14010112001asdklfjasldkfjasx1111&quot;;iin=&quot;444433&quot;;last4digits=&quot;1111&quot;;expirationMonth=&quot;12&quot;;expirationYear=&quot;2020&quot;;brandCode=&quot;Visa&quot;&#x27;</p>
<p>Assuming the current key version is &quot;1&quot; and the corresponding authentication key is &quot;F82EFA4A5AC542FD61ED26173543A1776D07C47D9935D05AEB168BF637AAC687&quot;, the signature will be:</p>
<p>The signature that is calculated with key and message will be: &quot;363a42aabeb53cfe79deb948d7ae33c797f7b12641308c0b78f6847477f36842&quot;</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo -n &#x27;timestamp=&quot;2014-01-01 12:00:00.133&quot;;cardToken=&quot;14010112001asdklfjasldkfjasx1111&quot;;iin=&quot;444433&quot;;last4digits=&quot;1111&quot;;expirationMonth=&quot;12&quot;;expirationYear=&quot;2020&quot;;brandCode=&quot;Visa&quot;&#x27; | openssl dgst -sha256 -hmac &quot;F82EFA4A5AC542FD61ED26173543A1776D07C47D9935D05AEB168BF637AAC687&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-for-version-3-payvaultjs-which-uses-apipvcardv2add">Example for version 3 payvault.js which uses /api/pv/Card/V2/Add<a href="#example-for-version-3-payvaultjs-which-uses-apipvcardv2add" class="hash-link" aria-label="Direct link to Example for version 3 payvault.js which uses /api/pv/Card/V2/Add" title="Direct link to Example for version 3 payvault.js which uses /api/pv/Card/V2/Add">​</a></h4>
<p>Suppose the reply is as follows:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resultType&quot;: &quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: &quot;2018-03-15 09:16:02.402&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;maskedCardDetails&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cardToken&quot;: &quot;18031509001Vy2DxizagCB4Io54a3426&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;iin&quot;: &quot;377782&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;last4digits&quot;: &quot;3426&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;brandCode&quot;: &quot;American Express&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;issuerCode&quot;: &quot;saison&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cardType&quot;: &quot;walmart&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expirationMonth&quot;: &quot;12&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expirationYear&quot;: &quot;2020&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;signature&quot;: &quot;eeba01eaecff23e12c3525385e0c4f9646ce8d38324566cab4a14ce5893e7715&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keyVersion&quot;: &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The message that is the input to Hmac is:</p>
<p>message = &#x27;timestamp=&quot;2018-03-15 09:16:02.402&quot;;cardToken=&quot;18031509001Vy2DxizagCB4Io54a3426&quot;;iin=&quot;377782&quot;;last4digits=&quot;3426&quot;;expirationMonth=&quot;12&quot;;expirationYear=&quot;2020&quot;;brandCode=&quot;American Express&quot;;issuerCode=&quot;saison&quot;;cardType=&quot;walmart&quot;</p>
<p>Assuming the current key version is &quot;1&quot; and the corresponding authentication key is &quot;665EDAFAEFE493E087EB6277F30B2E02F24473EE708AE2DF694BA5866850D820&quot;, the signature will be:</p>
<p>The signature that is calculated with key and message will be: &quot;eeba01eaecff23e12c3525385e0c4f9646ce8d38324566cab4a14ce5893e7715&quot;</p>
<br>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-for-version-4--7-payvaultjs-which-uses-apipvcardv3add">Example for version 4 &amp; 7 payvault.js which uses /api/pv/Card/V3/Add<a href="#example-for-version-4--7-payvaultjs-which-uses-apipvcardv3add" class="hash-link" aria-label="Direct link to Example for version 4 &amp; 7 payvault.js which uses /api/pv/Card/V3/Add" title="Direct link to Example for version 4 &amp; 7 payvault.js which uses /api/pv/Card/V3/Add">​</a></h4>
<p>Suppose the reply is as follows:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resultType&quot;: &quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: &quot;2018-03-15 09:16:02.402&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;maskedCardDetails&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cardToken&quot;: &quot;18031509001Vy2DxizagCB4Io54a3426&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;iin&quot;: &quot;377782&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;last4digits&quot;: &quot;3426&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;brandCode&quot;: &quot;American Express&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;issuerCode&quot;: &quot;saison&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cardType&quot;: &quot;walmart&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expirationMonth&quot;: &quot;12&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expirationYear&quot;: &quot;2020&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cvvToken&quot;: &quot;cvv_01b94b6231d6421cb03bf07023009c97&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;signature&quot;: &quot;c926f7486968b504248f662566e1f4a788f774e2b20f3d22815a717fc13dda03&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keyVersion&quot;: &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The message that is the input to Hmac is:</p>
<p>message = &#x27;timestamp=&quot;2018-03-15 09:16:02.402&quot;;cardToken=&quot;18031509001Vy2DxizagCB4Io54a3426&quot;;iin=&quot;377782&quot;;last4digits=&quot;3426&quot;;expirationMonth=&quot;12&quot;;expirationYear=&quot;2020&quot;;brandCode=&quot;American Express&quot;;issuerCode=&quot;saison&quot;;cardType=&quot;walmart&quot;;cvvToken=&quot;cvv_01b94b6231d6421cb03bf07023009c97&quot;&#x27;</p>
<p>Assuming the current key version is &quot;1&quot; and the corresponding authentication key is &quot;665EDAFAEFE493E087EB6277F30B2E02F24473EE708AE2DF694BA5866850D820&quot;, the signature will be:</p>
<p>The signature that is calculated with key and message will be: &quot;c926f7486968b504248f662566e1f4a788f774e2b20f3d22815a717fc13dda03&quot;</p>
<br>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-for-version-7x-payvaultjs-which-uses-apipvcardv4add">Example for version 7.x payvault.js which uses /api/pv/Card/V4/Add<a href="#example-for-version-7x-payvaultjs-which-uses-apipvcardv4add" class="hash-link" aria-label="Direct link to Example for version 7.x payvault.js which uses /api/pv/Card/V4/Add" title="Direct link to Example for version 7.x payvault.js which uses /api/pv/Card/V4/Add">​</a></h4>
<p>Suppose the reply is as follows:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resultType&quot;: &quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: &quot;2021-11-12 05:24:12.220&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;maskedCardDetails&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cardToken&quot;: &quot;21111205001aw93yHvypOJeR0eyr3426&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;iin&quot;: &quot;377782&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;last4digits&quot;: &quot;3426&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;brandCode&quot;: &quot;American Express&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;issuerCode&quot;: &quot;saison&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cardType&quot;: &quot;walmart&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expirationMonth&quot;: &quot;12&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expirationYear&quot;: &quot;2022&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;countryCode&quot;:&quot;JPN&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cvvToken&quot;: &quot;cvv_f9d3023d2c184206a40374a2e07a66c6&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;signature&quot;: &quot;f537486c4089a002d9ce9308be9a333e1069da89a9d374185ab0082670bca088&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keyVersion&quot;: &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The message that is the input to Hmac is:</p>
<p>message = &#x27;timestamp=&quot;2021-11-12 05:24:12.220&quot;;cardToken=&quot;21111205001aw93yHvypOJeR0eyr3426&quot;;iin=&quot;377782&quot;;last4digits=&quot;3426&quot;;expirationMonth=&quot;12&quot;;expirationYear=&quot;2022&quot;;brandCode=&quot;American Express&quot;;issuerCode=&quot;saison&quot;;cardType=&quot;walmart&quot;;countryCode=&quot;JPN&quot;;cvvToken=&quot;cvv_f9d3023d2c184206a40374a2e07a66c6&quot;&#x27;</p>
<p>Assuming the current key version is &quot;1&quot; and the corresponding authentication key is &quot;665EDAFAEFE493E087EB6277F30B2E02F24473EE708AE2DF694BA5866850D820&quot;, the signature will be:</p>
<p>The signature that is calculated with key and message will be: &quot;f537486c4089a002d9ce9308be9a333e1069da89a9d374185ab0082670bca088&quot;</p>
<p>Suppose the reply is as follows:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resultType&quot;: &quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: &quot;2018-03-09 07:27:21.420&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cvvToken&quot;: &quot;cvv_01b94b6231d6421cb03bf07023009c97&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;signature&quot;: &quot;2e615903684e8562fa0e3ead2cdc81c2f8ba500cf7228cfed53a92cf45b3ff8e&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keyVersion&quot;: &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>message = &#x27;timestamp=&quot;2018-03-09 07:27:21.420&quot;;cvvToken=&quot;cvv_01b94b6231d6421cb03bf07023009c97&quot;&#x27;</p>
<p>Assuming the current key version is &quot;1&quot; and the corresponding authentication key is &quot;665EDAFAEFE493E087EB6277F30B2E02F24473EE708AE2DF694BA5866850D820&quot;, the signature will be:</p>
<p>The signature that is calculated with key and message will be: &quot;2e615903684e8562fa0e3ead2cdc81c2f8ba500cf7228cfed53a92cf45b3ff8e&quot;</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="error-codes">Error Codes<a href="#error-codes" class="hash-link" aria-label="Direct link to Error Codes" title="Direct link to Error Codes">​</a></h2>
<table><thead><tr><th>Error Code</th><th>Reason</th><th>Next Action</th></tr></thead><tbody><tr><td>invalid_request_parameter</td><td>Some of request values are different from our specification of request data.</td><td>Check your request values.</td></tr><tr><td>authentication_failure</td><td>Authentication information of your request is wrong.</td><td>Check your authentication information.</td></tr><tr><td>unauthorized_access</td><td>You do not have any authority to access some APIs or card information.</td><td>Check your account&#x27;s authority.</td></tr><tr><td>not_found</td><td>Card or File token is not existed or already deleted. Cvv token not existed.</td><td>Check card or file token or cvv token in your request.</td></tr><tr><td>under_maintenance</td><td>PayVault system is under maintenance.</td><td>Check the announcement from PayVault team about maintenance schedule, or contact the PayVault team.</td></tr><tr><td>temporary_unavailable</td><td>There was a connectivity error and request went in timeout (only javascript)</td><td>Retry later</td></tr><tr><td>system_error</td><td>An unexpected error has occurred.</td><td>Contact the PayVault team.</td></tr><tr><td>cvv_token_unavailable</td><td>The redeemed cvv token is expired or already redeemed</td><td>Ask user again to insert CVV / Redeem without CVV token</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-status-codes">HTTP Status Codes<a href="#http-status-codes" class="hash-link" aria-label="Direct link to HTTP Status Codes" title="Direct link to HTTP Status Codes">​</a></h2>
<p>This table shows all possible HTTP status codes returned by PayVault and InfoVault API.</p>
<table><thead><tr><th>HTTP Status Code</th><th>Description</th></tr></thead><tbody><tr><td>200 - OK</td><td>Everything worked as expected.</td></tr><tr><td>403 - FORBIDDEN</td><td>Access was banned due to unauthorized access or/and attacks.</td></tr></tbody></table>
<p>Other possible HTTP status codes returned by various employed middle-ware:</p>
<table><thead><tr><th>HTTP Status Code</th><th>Description</th></tr></thead><tbody><tr><td>400 - Bad Request</td><td>No valid API key provided.</td></tr><tr><td>403 - FORBIDDEN</td><td>The access or request is not allowed.</td></tr><tr><td>404 - Not Found</td><td>The server did not find matching Request-URI.</td></tr><tr><td>405 - Method Not Allowed</td><td>The method specified in the Request-Line is not allowed.</td></tr><tr><td>408 - Request Timeout</td><td>The request was not processed before the server timeout limit.</td></tr><tr><td>500, 502, 503, 504 - Server Errors</td><td>PayVault service is experiencing issues.</td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sample-implementation">Sample Implementation<a href="#sample-implementation" class="hash-link" aria-label="Direct link to Sample Implementation" title="Direct link to Sample Implementation">​</a></h3>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bash">Bash<a href="#bash" class="hash-link" aria-label="Direct link to Bash" title="Direct link to Bash">​</a></h5>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo -n &#x27;timestamp=&quot;2014-01-01 12:00:00.133&quot;;cardToken=&quot;14010112001asdklfjasldkfjasx1111&quot;;iin=&quot;444433&quot;;last4digits=&quot;1111&quot;;expirationMonth=&quot;12&quot;;expirationYear=&quot;2020&quot;;brandCode=&quot;Visa&quot;&#x27; | openssl dgst -sha256 -hmac &quot;F82EFA4A5AC542FD61ED26173543A1776D07C47D9935D05AEB168BF637AAC687&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="python">Python<a href="#python" class="hash-link" aria-label="Direct link to Python" title="Direct link to Python">​</a></h5>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> hashlib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> hmac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;timestamp=&quot;2014-01-01 12:00:00.133&quot;;cardToken=&quot;14010112001asdklfjasldkfjasx1111&quot;;iin=&quot;444433&quot;;last4digits=&quot;1111&quot;;expirationMonth=&quot;12&quot;;expirationYear=&quot;2020&quot;;brandCode=&quot;Visa&quot;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SECRET_KEY </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;F82EFA4A5AC542FD61ED26173543A1776D07C47D9935D05AEB168BF637AAC687&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ticket_signature </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hmac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SECRET_KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hashlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sha256</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hexdigest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ticket_signature</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/guides/payvault/list-of-trailing-and-leading-characters-removed/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">List of trailing and leading characters removed when trimming a Cvv, Expiration Month, or Expiration Year</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/products/api-reference/payvault/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Reference</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#api-if-specification" class="table-of-contents__link toc-highlight">API IF Specification</a></li><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a><ul><li><a href="#algorithms--terms" class="table-of-contents__link toc-highlight">Algorithms &amp;&amp; Terms</a></li><li><a href="#how-to-sign-request-json" class="table-of-contents__link toc-highlight">How to sign request JSON</a></li><li><a href="#how-to-check-response-signature" class="table-of-contents__link toc-highlight">How to check response signature</a></li></ul></li><li><a href="#error-codes" class="table-of-contents__link toc-highlight">Error Codes</a></li><li><a href="#http-status-codes" class="table-of-contents__link toc-highlight">HTTP Status Codes</a><ul><li><a href="#sample-implementation" class="table-of-contents__link toc-highlight">Sample Implementation</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Rakuten Group</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://privacy.rakuten.co.jp/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/support/terms-of-use/">Terms of Use</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Rakuten Group Inc.</div></div></div></footer></div>
</body>
</html>