<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial/Intro/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">API Overview | Rakuten Payment Platform Documentation Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.payment.global.rakuten.com/guides/intro/card/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="API Overview | Rakuten Payment Platform Documentation Portal"><meta data-rh="true" name="description" content="Introduction to the API architecture of Rakuten Payment Service"><meta data-rh="true" property="og:description" content="Introduction to the API architecture of Rakuten Payment Service"><link data-rh="true" rel="icon" href="/img/logoR.png"><link data-rh="true" rel="canonical" href="https://docs.payment.global.rakuten.com/guides/intro/card/"><link data-rh="true" rel="alternate" href="https://docs.payment.global.rakuten.com/guides/intro/card/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.payment.global.rakuten.com/ja/guides/intro/card/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://docs.payment.global.rakuten.com/guides/intro/card/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HRVS4580AM-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/release-note-blog/rss.xml" title="Rakuten Payment Platform Documentation Portal RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/release-note-blog/atom.xml" title="Rakuten Payment Platform Documentation Portal Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RE7H19L577"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RE7H19L577",{anonymize_ip:!0})</script>












<link rel="search" type="application/opensearchdescription+xml" title="Rakuten Payment Platform Documentation Portal" href="/opensearch.xml">




<link rel="stylesheet" href="/vendor/bootstrap/css/bootstrap.min-ec3bb52a00e176a7181d454dffaea219.css">
<link rel="stylesheet" href="/vendor/metisMenu/css/metisMenu.min-bb3f6f86f3feb94b2ba7b43c9d315c54.css">
<link rel="stylesheet" href="/css/developer_tool-c89ff5e2e123a5655767d765e09d1f73.css">
<link rel="stylesheet" href="/css/loader-14604e38937c8d26ac916bf28f2a9f9b.css">
<link rel="stylesheet" href="/css/webportal-4d03e6d97e3053f274e2592b8d9b57656cbd3555.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jotted@latest/jotted.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer="defer"></script>
<script src="https://cdn.jsdelivr.net/npm/jotted@latest/jotted.min.js" defer="defer"></script>
<script src="/vendor/bootstrap/js/bootstrap.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js" defer="defer"></script>
<script src="/js/jquery-dateFormat.min-95766bbf0f6b9ef23609620a13d09777.js" defer="defer"></script>
<script src="/js/devtool-common-9dea6bf50ccb01e308540d56d8b874f2.js" defer="defer"></script>
<script src="/js/hmac-sha256-e355334677dcf7e7b062c1e1aff8e36d.js" defer="defer"></script>
<script src="/js/base64-ae4086f4bc9b991b8ac94e25878e29b9.js" defer="defer"></script>
<script src="/js/aes-d57c122164557ff2dca90400c4744648.js" defer="defer"></script>
<script src="/js/dialog-9d47d91af9f0a88581e24b4d9f4e1cb1.js" defer="defer"></script>
<script src="/js/devtool-submit-862a00f15d42f9e8518c299469c19ef6.js" defer="defer"></script>
<script src="/js/devtool-authorize-771a0bdbc9b763daf235ecd6920116d5.js" defer="defer"></script>
<script src="/js/devtool-authorizecapture-617244bc322de2914aa86f13dbffebaf.js" defer="defer"></script>
<script src="/js/devtool-capture-d6ce015f67d7d8449f77e86f43dc532e.js" defer="defer"></script>
<script src="/js/devtool-cancelRefund-a49c18f1d89ca83450f8e705e0e7a6c3.js" defer="defer"></script>
<script src="/js/devtool-partialrefund-c88324e6562658a68361c3934d0aa98c.js" defer="defer"></script>
<script src="/js/devtool-find-f2e6910b7c01bddeacd7e8d5148eb041.js" defer="defer"></script>
<script src="/js/devtool-modify-0dd4b07cec2d1a7a111d8b3c024423aa.js" defer="defer"></script>
<script src="/js/encrypt-decrypt-tool-6a519772f0093588b32923ebf96ddf29.js" defer="defer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.0e845cde.css">
<script src="/assets/js/runtime~main.aa8ddc73.js" defer="defer"></script>
<script src="/assets/js/main.56c25086.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="headerSub relative flex text-xs items-center justify-between sm:h-8 lg:justify-start" aria-label="Global"><div class="hidden w-full md:flex md:ml-5 md:pr-5 md:space-x-5"><a href="https://payment.rakuten.co.jp/" class="hidden font-medium text-gray-500 hover:text-gray-900">Rakuten Payment</a><a href="https://global.rakuten.com/corp/" class="hidden font-medium text-gray-500 hover:text-gray-900">Rakuten Group</a><a href="/logout/" style="margin-left:auto" class="btnLogin inline-block font-medium text-sky-500 hover:text-white hover:bg-sky-500 px-2 mr-5 border-sky-500 border-2">Log out</a></div></div><div class="relative flex text-xs items-center justify-between sm:h-8 lg:justify-start" aria-label="Global"><div class="hidden w-full md:flex md:ml-5 md:pr-5 md:space-x-5"><img class="h-6" src="/img/logoR.svg" alt=""><div class="nameSiteTitle font-serif h-8 text-base font-bold uppercase"><span>Rakuten Payment Platform Documentation Portal</span></div></div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/guides/intro/card/">Guides</a><a class="navbar__item navbar__link" href="/products/api-reference/">Products</a><a class="navbar__item navbar__link" href="/release-note-blog/">Release notes</a><a class="navbar__item navbar__link" href="/release-notes/">Release notes</a><a class="navbar__item navbar__link" href="/support/">Support</a><a class="navbar__item navbar__link" href="/faq/dashboard/">FAQ</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/guides/intro/card/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/ja/guides/intro/card/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><b>Home</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/product/">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/guides/intro/card/">Development Overview</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/intro/card/">API Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/intro/convenience-store/">Page Not Found</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/intro/payment-step/">Page Not Found</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/guides/intro/card/">API Overview</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/intro/card/">API Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/functionaldocument/">API Overview - Appendix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/format/">Format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/point-coupon/">Rakuten Point &amp; Coupon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/functionaldocument-notification/">Notification</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/products/pgw3/">Products&amp;APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/library/">Playground</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/cardpayment_testguideline/">Testing Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/guides/sellerportal_introduction/">Seller Portal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/faq/dashboard/">FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/release-note-blog/">Release Notes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/release-notes/">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/support/">Support Desk</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/support/">Support</a><button aria-label="Expand sidebar category &#x27;Support&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development Overview</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">API Overview</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>API Overview</h1></header>
<div class="tableOfContentsInline_prmo"><ul class="table-of-contents"><li><a href="#credit-card-transaction-process-through-payment-system">Credit card transaction process through Payment System</a></li><li><a href="#card-payment-api-list">Card Payment API List</a></li><li><a href="#types-of-payment-status">Types of payment status</a></li><li><a href="#payment-status-transition-flow">Payment status transition Flow</a></li><li><a href="#result-types-of-api-calls">Result Types of API calls</a></li><li><a href="#authentication-key-when-you-call-our-apis">Authentication Key when you call our APIs</a></li><li><a href="#error-code">Error code</a><ul><li><a href="#error-code-mapping">Error code mapping</a></li><li><a href="#mapping-the-error-codes-and-pre-api-call-payment-status">Mapping the error codes and pre-API call payment status</a></li></ul></li><li><a href="#payment-processing-for-credit-card-payments">Payment Processing for credit card payments</a></li><li><a href="#how-to-create-signature">How to create signature</a></li><li><a href="#how-to-encrypt-card-information">How to encrypt card information</a></li><li><a href="#restriction">Restriction</a><ul><li><a href="#sending-time">Sending Time</a></li></ul></li></ul></div>
<p>Here you will learn the basics of our payment processing services. We recommend that you read through each chapter in order to gain a good understanding of what we offer and how it works.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Interested in API specs?</div><div class="admonitionContent_BuS1"><p>If you are confident you can skip this guide, you can go to our detailed <a href="/products/api-reference/"><em><strong>API specification</strong></em></a> pages and start development right away. Otherwise, we recommend that you read through the guide first.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="credit-card-transaction-process-through-payment-system">Credit card transaction process through Payment System<a href="#credit-card-transaction-process-through-payment-system" class="hash-link" aria-label="Direct link to Credit card transaction process through Payment System" title="Direct link to Credit card transaction process through Payment System">​</a></h2>
<p>Credit card payment processing uses two systems: firstly <strong>Payment Gateway</strong>, and secondly <strong>PayVault</strong>, which tokenizes credit card information for use. We also offer <strong>Seller Portal</strong> as a payment management screen for your business.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs fig01 figBox"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">1-2. Tokenize</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">3. Send Request</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">4-5. De-tokenize</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">6. Process transaction</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 fig01Tab1"><p><img decoding="async" loading="lazy" alt="Payment system diagram" src="/assets/images/credit-card-transaction-process-en-1-be2c288456bc85f0df24c682cc15e72a.png" width="1845" height="741" class="img_ev3q">
</p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Tokenize</div><div class="admonitionContent_BuS1">We tokenize the credit card information between your system and PayVault.<br>PayVault then issues a card token from the credit card information.</div></div><p></p></div><div role="tabpanel" class="tabItem_Ymn6 fig01Tab2" hidden=""><p><img decoding="async" loading="lazy" alt="Payment system diagram" src="/assets/images/credit-card-transaction-process-en-2-37b877514ab8ddfaaa271a4f88459e5b.png" width="1845" height="741" class="img_ev3q">
</p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Send Request</div><div class="admonitionContent_BuS1">Using a card token, your system sends a credit card payment request to our payment system.</div></div><p></p></div><div role="tabpanel" class="tabItem_Ymn6 fig01Tab3" hidden=""><p><img decoding="async" loading="lazy" alt="Payment system diagram" src="/assets/images/credit-card-transaction-process-en-3-df26cb731657649cad5e6ad4631dc09b.png" width="1845" height="741" class="img_ev3q">
</p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>De-tokenize</div><div class="admonitionContent_BuS1">Upon receiving the card token, our payment system converts it into a credit card number with PayVault.</div></div><p></p></div><div role="tabpanel" class="tabItem_Ymn6 fig01Tab4" hidden=""><p><img decoding="async" loading="lazy" alt="Payment system diagram" src="/assets/images/credit-card-transaction-process-en-4-61f753f1d8874aadbbe349b7afd4e9cb.png" width="1845" height="741" class="img_ev3q">
</p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Process transaction</div><div class="admonitionContent_BuS1">Our payment system sends the credit card number to the credit card company for credit card payment processing.</div></div><p></p></div></div></div>
<p>When using <strong>3D Secure</strong> authentication, as soon as your system sends a payment request to our system, we send a <strong>3D Secure</strong> processing request to the credit card company. If the authentication is successful, our system will send the payment processing request to the credit card company again.</p>
<div class="blockRelatedTopics"><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="related-topics">Related topics<a href="#related-topics" class="hash-link" aria-label="Direct link to Related topics" title="Direct link to Related topics">​</a></h4><ul>
<li><strong>Guides</strong><br>
<a href="/guides/payvault/">PayVault Overview</a><br></li>
<li><strong>API references</strong><br>
<a href="/products/api-reference/pgw3/">Payment Gateway API</a><br>
<a href="/products/api-reference/payvault/">PayVault API</a><br></li>
</ul></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="card-payment-api-list">Card Payment API List<a href="#card-payment-api-list" class="hash-link" aria-label="Direct link to Card Payment API List" title="Direct link to Card Payment API List">​</a></h2>
<p>The following is a list of APIs that can be used for card payment processing in our payment system.</p>
<table><thead><tr><th>#</th><th>API Type</th><th>Details</th></tr></thead><tbody><tr><td>1</td><td><code>/Payment/V1/Authorize</code></td><td>It is used to initiate a credit card authorization process. Once the card authorization is complete, the card payment transaction must then use the <code>Capture</code> API to charge(bill) the credit card.</td></tr><tr><td>2</td><td><code>/Payment/V2/Authorize/HTML</code></td><td>When using 3D Secure for credit card payments, you must use an HTML-type API to redirect the shopper&#x27;s browser screen to the 3D Secure authentication screen.</td></tr><tr><td>3</td><td><code>/Payment/V1/AuthorizeAndCapture</code></td><td>This API handles credit card authorization and capturing (billing) through the same API request. For example, if you are selling digital content, both card authorization and capture must be processed consecutively so that shoppers can download the purchased digital content immediately after the payment is completed.</td></tr><tr><td>4</td><td><code>/Payment/V2/AuthorizeAndCapture/HTML</code></td><td>When using 3D Secure on credit card payments, you must use an HTML-type API to redirect the shopper&#x27;s browser screen to the 3D Secure authentication screen.  This API handles both credit card authorization and capturing (billing) by the same API request.</td></tr><tr><td>5</td><td><code>/Payment/V1/Modify</code></td><td>This API allows you to change the paid amount by specifying the changed amount of the payment transaction. Note that you can change only the paid amount. Changing the number of instalment card payments or bonus payments in Japan is not supported.</td></tr><tr><td>6</td><td><code>/Payment/V1/Capture</code></td><td>It processes the billing for authorized transactions. The authorization process must be first if you want to separate your payment process into authorization and capture (billing).</td></tr><tr><td>7</td><td><code>/Payment/V1/CancelOrRefund</code></td><td>Depending on the payment status, the following cancellation processes are performed, <ul><li>If you call the <code>CancelOrRefund</code> API while the payment status is still &quot;authorized&quot;, the authorized transaction will be cancelled. </li><li>If you call the <code>CancelOrRefund</code> API after the payment status becomes &quot;captured&quot;, the captured transaction will be refunded to the shopper. The timing of the refund on the credit card company/card issuing company is depended on the credit card company/card issuing bank.</li></ul></td></tr><tr><td>8</td><td><code>/Payment/V1/Find</code></td><td>This API allows you to get the detailed and latest payment transaction status information as the response value.</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="types-of-payment-status">Types of payment status<a href="#types-of-payment-status" class="hash-link" aria-label="Direct link to Types of payment status" title="Direct link to Types of payment status">​</a></h2>
<p>&quot;initialized&quot;, &quot;authorized&quot;, and &quot;captured&quot; are three types of payment statuses.</p>
<table><thead><tr><th>#</th><th>status</th><th>Details</th></tr></thead><tbody><tr><td>1</td><td><code>initialized</code></td><td>The &quot;initialized&quot; status is the first payment status to initialize(start) payment processing. <ul><li>Newly created payment data starts with the &quot;initialized&quot; payment status. If the payment is successful, it is updated to the next payment status, &quot;authorized&quot;.</li><li>If the payment transaction is not executed or defined, the payment status is &quot;initialized&quot;.</li><li>If the payment transaction is cancelled after the payment is completed, the payment status will be updated to &quot;initialized&quot;.</li></ul></td></tr><tr><td>2</td><td><code>authorized</code></td><td>The payment status changes to &quot;authorized&quot; after the authorization request has been completed. For example, in the case of a credit card transaction, if the authorization request is accepted by the credit card company (card issuer), the transaction status is updated from &quot;initialized&quot; to &quot;authorized&quot;.</td></tr><tr><td>3</td><td><code>captured</code></td><td>The payment status changes to &quot;captured&quot; after the billing process for the authorized transaction has been completed.<br><br>For e-commerce businesses such as sales of goods and digital content, this payment status is used as below.<ul><li>E-commerce goods sales: You process the card authorization request first. Then after the purchased item has been shipped, you use the Capture API to bill the authorized payment transaction. The payment status is then updated to &quot;captured&quot;.</li><li>E-commerce digital content sales: Since digital content can be used immediately after the purchase, either AuthorizeAndCapture API or AuthorizeAndCapture HTML API to use 3D Secure is suitable since you can process both the card authorization and capturing (billing) by the same payment request consecutively. Once the payment transaction status changes to &quot;captured,&quot; you can allow the shopper to download the purchased digital content from your E-commerce site.</li></ul></td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="payment-status-transition-flow">Payment status transition Flow<a href="#payment-status-transition-flow" class="hash-link" aria-label="Direct link to Payment status transition Flow" title="Direct link to Payment status transition Flow">​</a></h2>
<p>The payment status (blue) transitions as shown in the figure below depending on the execution of the payment API (white frame) used.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs fig01a"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">1</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">2</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">3</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">4</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">5</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">6</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 fig01Tab1"><p></p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>initialize</div><div class="admonitionContent_BuS1">Payment transaction status starts with <strong>&quot;initialized&quot;</strong>.</div></div>
<img decoding="async" loading="lazy" alt="Payment status transition Flow diagram" src="/assets/images/payment-status-transition-flow-1-f94fce288313c54c0a7e9c822a181209.png" width="1830" height="1203" class="img_ev3q"><p></p></div><div role="tabpanel" class="tabItem_Ymn6 fig01aTab2" hidden=""><p></p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Authorize</div><div class="admonitionContent_BuS1">When you use the <strong><code>Authorize</code></strong> API and the result is a success, the payment status changes to <strong>&quot;authorized&quot;</strong>.</div></div>
<img decoding="async" loading="lazy" alt="Payment status transition Flow diagram" src="/assets/images/payment-status-transition-flow-2-8384be724bb8fcfc07b7eb1f93e66b15.png" width="1830" height="1203" class="img_ev3q"><p></p></div><div role="tabpanel" class="tabItem_Ymn6 fig01aTab3" hidden=""><p></p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Capture</div><div class="admonitionContent_BuS1">Then, when you use the <strong><code>Capture</code></strong> API and the result is a success, the payment status changes to <strong>&quot;captured&quot;</strong>.</div></div>
<img decoding="async" loading="lazy" alt="Payment status transition Flow diagram" src="/assets/images/payment-status-transition-flow-3-86427039f58303eeb110ab87d141c6d4.png" width="1830" height="1203" class="img_ev3q"><p></p></div><div role="tabpanel" class="tabItem_Ymn6 fig01aTab4" hidden=""><p></p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Authorize &amp; Capture</div><div class="admonitionContent_BuS1">When you use the <strong><code>AuthorizeAndCapture</code></strong> API, it does not change the payment status &quot;authorized&quot; but directly to the <strong>&quot;captured&quot;</strong> status.</div></div>
<img decoding="async" loading="lazy" alt="Payment status transition Flow diagram" src="/assets/images/payment-status-transition-flow-4-b8a9d9a4b7effa411de2a79dcfe08c26.png" width="1830" height="1203" class="img_ev3q"><p></p></div><div role="tabpanel" class="tabItem_Ymn6 fig01aTab5" hidden=""><p></p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Cancel &amp; Refund</div><div class="admonitionContent_BuS1">If you call the <strong><code>CancelOrRefund</code></strong> API from the <strong>&quot;captured&quot;</strong> status, it changes the <strong>&quot;initialized&quot;</strong> status.</div></div>
<img decoding="async" loading="lazy" alt="Payment status transition Flow diagram" src="/assets/images/payment-status-transition-flow-5-ce0a3bf46478c98f46923f64d419d9bd.png" width="1830" height="1203" class="img_ev3q"><p></p></div><div role="tabpanel" class="tabItem_Ymn6 fig01aTab6" hidden=""><p></p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Modify</div><div class="admonitionContent_BuS1">When you use the <strong><code>Modify</code></strong> API, there is no change in the payment status before and after the API calls.</div></div>
<img decoding="async" loading="lazy" alt="Payment status transition Flow diagram" src="/assets/images/payment-status-transition-flow-6-ba036000d33ad7640466613acb80a0d6.png" width="1830" height="1203" class="img_ev3q"><p></p></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="result-types-of-api-calls">Result Types of API calls<a href="#result-types-of-api-calls" class="hash-link" aria-label="Direct link to Result Types of API calls" title="Direct link to Result Types of API calls">​</a></h2>
<p>Either of the following three types of API call results is returned as response data when an API call request is made.</p>
<table><thead><tr><th>#</th><th>Result Type</th><th>Details</th></tr></thead><tbody><tr><td>1</td><td><code>success</code></td><td>We return it as the response value if the payment request is successful.<br><br>For example, if you receive this &quot;success&quot; response from calling the Authorize API, your payment request was accepted.</td></tr><tr><td>2</td><td><code>failure</code></td><td>We return it as the response value if the API request fails due to some reason.<br><br>For example, if you receive this &quot;failure&quot; response from calling the Authorize API, see &quot;List of Error Codes&quot; below because your payment request was not accepted.</td></tr><tr><td>3</td><td><code>pending</code></td><td>We return it as the response value If there is a temporary network error or other system problem with the connected external system(s). If this pending result happens, it&#x27;s recovered by a background process with a period defined in <a href="/guides/functionaldocument/#waiting-time">WaitingTime</a>, and results in success or failure later. Hence, you must take one of the following two measures to deal with the pending status situation.<ol><li>Implement a feature to call Find API periodically and update the payment status on your system</li><li>Use Seller Portal to cancel or change the amount manually based on a payment ID with a result type of &quot;pending&quot;.</li></ol></td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="authentication-key-when-you-call-our-apis">Authentication Key when you call our APIs<a href="#authentication-key-when-you-call-our-apis" class="hash-link" aria-label="Direct link to Authentication Key when you call our APIs" title="Direct link to Authentication Key when you call our APIs">​</a></h2>
<p>Our payment system issues an authentication key in order to authenticate and authorize your system which calls our APIs. Therefore, when sending an API request, your system must create a digital signature using the authentication key and set it as a request parameter. The authentication key is a 64-digit alphanumeric character. It will be provided separately by our company after the contract is signed, and your company will obtain it through the Seller Portal.  Refer to the Seller Portal page to learn how to obtain the authentication key.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="error-code">Error code<a href="#error-code" class="hash-link" aria-label="Direct link to Error code" title="Direct link to Error code">​</a></h2>
<p>The codes is defined to explain what you should do rather than what happened basically.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Alert</div><div class="admonitionContent_BuS1"><p>If you cannot get response or you get 5xx error, that doesn&#x27;t necessarily mean the transaction has failed, so make sure to call Find API to check status at gpayment.</p><p>If you get a response and it&#x27;s failure, the response has one of the following codes.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you receive error code that is NOT listed below, please refer to <a href="/faq/content/faq018/">Action to Error Code NOT List in PGW Document / PGWドキュメントに存在しないエラーコードへの対応</a>　</p></div></div>
<table><thead><tr><th>No</th><th>Error Code</th><th>Situation of Error</th><th>Your Action after Receiving Error Code</th></tr></thead><tbody><tr><td>01</td><td>invalid_request_parameter</td><td>The request doesn&#x27;t follow the validation rule.</td><td>Check whether the submitted request data and format are correct or not.</td></tr><tr><td>02</td><td>system_error</td><td>A system error is temporarily occurring in our payment system.</td><td>Send the payment request again after some time.</td></tr><tr><td>03</td><td>temporarily_unavailable</td><td>Receiving API call requests are temporarily restricted.</td><td>Send the payment request again after some time.</td></tr><tr><td>04</td><td>invalid_payment_method</td><td>This error code is returned in the following cases. Example 1) An expired card was used. Example 2) The payment amount exceeded the card&#x27;s credit limit. Example 3) The payment card is not available.</td><td>Because of the validity of the payment card information or credit limit, you need to ask the shopper to contact their credit card company (card issuer) about the payment card status or ask the shopper to use another payment card.</td></tr><tr><td>05</td><td>aborted_payment</td><td>This error code is returned when the shopper closes their browser during a 3D Secure screen transition.  Note that the timeout errors are not included in this error code.</td><td>Let the shopper select the payment method again and make the payment.</td></tr><tr><td>06</td><td>unauthorized_access</td><td>This error code is returned when the shopper uses an acceptable payment card (e.g. stolen card).</td><td>Do not proceed with payment processing on your system.</td></tr><tr><td>07</td><td>under_maintenance</td><td>This error code is returned if you send a payment request during planned maintenance. We share maintenance information with you in advance. 6. Maintenance</td><td>Display a message to your shoppers that the system is under maintenance.</td></tr><tr><td>08</td><td>already_completed</td><td>Check <strong>Error code mapping</strong></td><td>Treat the request as processed and end the payment processing.</td></tr><tr><td>09</td><td>unacceptable_request</td><td>This error code is returned when you send a payment request that is not supported.<ul><li>Example 1) You called the AuthorizeAndCapture HTML API for the transaction whose status is already &quot;authorized&quot;.</li><li>Example 2) You called the Capture API after the capture available period had expired.</li></ul><br>For details, see the table &quot;Error Codes and Pre-Execution Status Mapping&quot; below.</td><td>Do not process the payment request that returns this error code, and perform the payment processing again with the appropriate payment request.</td></tr><tr><td>10</td><td>invalid_point</td><td>It is returned when you set the wrong amount of Rakuten Points, such as the amount of the Point redemption exceeds the shopper&#x27;s Rakuten Point Balance.</td><td>Change the amount and retry.</td></tr><tr><td>11</td><td>point_unavailable</td><td>Point system error.</td><td>Accept payment by removing the Rakuten Point or let the shopper try later.</td></tr><tr><td>12</td><td>invalid_coupon</td><td>Set the wrong coupon code of the Rakuten Coupon platform</td><td>Change the coupon code and retry</td></tr><tr><td>13</td><td>coupon_unavailable</td><td>The Coupon platform system error or expired coupon was used.</td><td>Accept payment by removing the coupon or letting the shopper try later.</td></tr><tr><td>14</td><td>not_found</td><td>No transactions match the specified condition.<ul><li> Example: This error code is returned when you call the Find API with a non-existent payment ID or a non-existent card token. </li></ul></td><td>Check if you are sending the correct paymentID and card token or not.</td></tr><tr><td>15</td><td>cvv_token_unavailable</td><td>This error code is returned when the CVV token (security code-only token) used for the payment request is invalid. <ul><li>Example 1) The CVV token has expired Example</li><li> 2) The CVV token that has already been sent with your payment request has been used and processed during network trouble. </li></ul></td><td>Issue a new CVV token again by using the PayVault CVV Token Issuance feature.</td></tr><tr><td>16</td><td>agency_unavailable</td><td>System problem at your payment agency/payment service provider or network problem between PGW and their system.</td><td>We cannot determine the duration of their issue. Therefore, please confirm what message should be displayed.</td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="error-code-mapping">Error code mapping<a href="#error-code-mapping" class="hash-link" aria-label="Direct link to Error code mapping" title="Direct link to Error code mapping">​</a></h3>
<p>It shows what error code may be returned when each API is executed. For example, when a request is sent by calling the Authorize API, a response may be returned with an error code of invalid_payment_method.</p>
<table class="guidesErrorCodeMapping"><thead><tr><th><p>API</p></th><th colspan="4"><p>Error code</p></th></tr></thead><tbody><tr><td><p><code>/Payment/V1/Authorize</code></p></td><td rowspan="4"><p>invalid_payment_method<br>
unauthorized_access<br>
cvv_token_unavailable<br>
already_completed</p></td><td rowspan="2"><p>aborted_payment</p></td><td rowspan="7"><p>unacceptable_request</p></td><td rowspan="8"><p>invalid_request_parameter<br>
system_error<br>
temporarily_unavailable<br>
under_maintenance<br>
agency_unavailable</p></td></tr><tr><td><p><code>/Payment/V2/Authorize/HTML</code></p></td></tr><tr><td><p><code>/Payment/V1/AuthorizeAndCapture</code></p></td><td><p>-</p></td></tr><tr><td><p><code>/Payment/V2/AuthorizeAndCapture/HTML</code></p></td><td><p>-</p></td></tr><tr><td><p><code>/Payment/V1/Modify</code></p></td><td><p>invalid_payment_method</p></td><td rowspan="4"><p>not_found</p></td></tr><tr><td><p><code>/Payment/V1/Capture</code></p></td><td rowspan="2"><p>already_completed</p></td></tr><tr><td><p><code>/Payment/V1/CancelOrRefund</code></p></td></tr><tr><td><p><code>/Payment/V1/Find</code></p></td><td><p>-</p></td><td><p>-</p></td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mapping-the-error-codes-and-pre-api-call-payment-status">Mapping the error codes and pre-API call payment status<a href="#mapping-the-error-codes-and-pre-api-call-payment-status" class="hash-link" aria-label="Direct link to Mapping the error codes and pre-API call payment status" title="Direct link to Mapping the error codes and pre-API call payment status">​</a></h3>
<table class="guidesErrorApiMapping"><thead><tr><th rowspan="2"><p>Payment status before the API call</p></th><th rowspan="2"><p>The Result Type before the API call</p></th><th colspan="5"><p>API that you call</p></th></tr><tr><th><p>Authorize</p></th><th><p>AuthorizeAndCapture</p></th><th><p>Modify</p></th><th><p>Capture</p></th><th><p>CancelOrRefund</p></th></tr></thead><tbody><tr><td rowspan="2"><p>initialized</p></td><td><p>success</p></td><td><p>-</p></td><td><p>-</p></td><td><p>unacceptable_request</p></td><td><p>unacceptable_request</p></td><td><p>already_completed</p></td></tr><tr><td><p>failure</p></td><td><p>-</p></td><td><p>-</p></td><td><p>unacceptable_request</p></td><td><p>unacceptable_request</p></td><td><p>unacceptable_request</p></td></tr><tr><td><p>authorized</p></td><td><p>-</p></td><td><p>already_completed</p></td><td><p>unacceptable_request</p></td><td><p>-</p></td><td><p>unacceptable_request *1</p></td><td><p>unacceptable_request *2</p></td></tr><tr><td><p>captured</p></td><td><p>-</p></td><td><p>unacceptable_request</p></td><td><p>already_completed</p></td><td><p>-</p></td><td><p>already_completed</p></td><td><p>unacceptable_request *2</p></td></tr></tbody></table>
<p class="text-sm">*1: When the acquired authorization has expired<br>
*2: When an authorized payment cannot be cancelled for some reason</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="payment-processing-for-credit-card-payments">Payment Processing for credit card payments<a href="#payment-processing-for-credit-card-payments" class="hash-link" aria-label="Direct link to Payment Processing for credit card payments" title="Direct link to Payment Processing for credit card payments">​</a></h2>
<p>We send credit card authorization requests by using our credit card token technology. When a credit card payment is made, the payment is processed along with a card token that tokenizes the credit card information. The shopper&#x27;s credit card information is never sent directly through this API from your system.</p>
<p>To enable your system to make a payment request, we provide four types of APIs as follows. The difference is how the payment status changes and whether or not the web browser being redirected happens.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Check your use case</div><div class="admonitionContent_BuS1"><ul><li>If you want to enable shoppers to use 3D Secure authentication at the same request as a payment request, you shall use the HTML API version, not the direct server-to-server API version.</li><li>If you use AuthorizeAndCapture, the payment status becomes immediately &quot;captured&quot;, which skips the &quot;authorized&quot; status. You will not need to call the Capture API after the transactions status changes to &quot;authorized&quot;. However, note that authorization processing needs to be separately processed from capture after item shipment if your business is an E-commerce type business.</li></ul></div></div>
<table class="guidesPaymentProcessing"><thead><tr><th>#</th><th>API types</th><th>API version</th><th>Browser redirected</th><th>How the payment status changes</th></tr></thead><tbody><tr><td class="text-center">1</td><td><p>Authorize API  (direct server-to-server)</p></td><td class="text-center">V1</td><td class="text-center">NO</td><td rowspan="2">&quot;Authorized&quot;, then Captured after calling the Capture API</td></tr><tr><td class="text-center">2</td><td>Authorize HTML API</td><td class="text-center">V2</td><td class="text-center">YES</td></tr><tr><td class="text-center">3</td><td><p>AuthotizeAndCapture API (direct server-to-server)</p></td><td class="text-center">V1</td><td class="text-center">NO</td><td rowspan="2">The payment status Immediately changes to &quot;Captured&quot;. </td></tr><tr><td class="text-center">4</td><td><p>AuthorizeAndCapture HTML API</p></td><td class="text-center">V2</td><td class="text-center">YES</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-create-signature">How to create signature<a href="#how-to-create-signature" class="hash-link" aria-label="Direct link to How to create signature" title="Direct link to How to create signature">​</a></h2>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span></div><div class="admonitionContent_BuS1"><p>The measure is closed due to security enhancement by mm dd, 2017.</p></div></div>
<ul>
<li>
<p>Hash scheme<br>
HMAC SHA256</p>
</li>
<li>
<p>Authentication Key<br>
Key provided by Payment GW</p>
<p>Note</p>
</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">EXAMPLE OF MAKING SIGNATURE</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">#---------------------------------------------------------------------</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># EXAMPLE OF MAKING SIGNATURE</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">#---------------------------------------------------------------------</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">#prepare authentication key(provided by Payment GW)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">AUTHENTICATION_KEY = &quot;abcde67890abcde67890abcde67890ab&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">#create your JSON request</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">request_json = your_request.to_json</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">#create signature with HMAC-SHA256</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">signature = HMAC.to_hexdigest(&#x27;sha256&#x27;, AUTHENTICATION_KEY, request_json)</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-encrypt-card-information">How to encrypt card information<a href="#how-to-encrypt-card-information" class="hash-link" aria-label="Direct link to How to encrypt card information" title="Direct link to How to encrypt card information">​</a></h2>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span></div><div class="admonitionContent_BuS1"><p>The measure is closed due to security enhancement by mm dd, 2017.</p></div></div>
<ul>
<li>
<p>Encryption scheme<br>
AES 256 bits</p>
</li>
<li>
<p>Block cipher mode of operation<br>
CBC(Cipher-block chaining)</p>
</li>
<li>
<p>Padding<br>
PKCS#5 Padding</p>
</li>
<li>
<p>Encryption Key<br>
Key provided by Payment GW</p>
</li>
<li>
<p>Note</p>
</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">EXAMPLE OF CARD NUMBER ENCRYPTION PROCESS</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">#---------------------------------------------------------------------</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">#  EXAMPLE OF CARD NUMBER ENCRYPTION PROCESS</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">#---------------------------------------------------------------------</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># prepare encription key(provided by us)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">ENCRYPTION_KEY = &quot;abcde67890abcde67890abcde67890ab&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># prepare card number(without &#x27;-&#x27;)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">card_number = 1234567890123456</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># create AES(256 bits CBC) cipher</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">cipher = Cipher.new(&#x27;aes-256-cbc&#x27;)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># set IV(CBC&#x27;s Initialization Vector)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">iv = cipher.generate_iv(ENCRYPTION_KEY)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">cipher.iv = iv</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># set encryption key</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">cipher.key = ENCRYPTION_KEY</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># encrypt card number</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">encrypted_card_number = cipher.encrypt(card_number)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># concatenate IV and encrypted card number</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">iv_plus_encrypted_card_number = iv + encrypted_card_number</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># encode as BASE64</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">request_format_cipher = BASE64.hex_to_base64(iv_plus_encrypted_card_number)</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="restriction">Restriction<a href="#restriction" class="hash-link" aria-label="Direct link to Restriction" title="Direct link to Restriction">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sending-time">Sending Time<a href="#sending-time" class="hash-link" aria-label="Direct link to Sending Time" title="Direct link to Sending Time">​</a></h3>
<p>The string representation of date/time in the request/response is based on UTC, not your local date and time, and the format must be &quot;yyyy-MM-dd HH:mm<!-- -->:ss<!-- -->.SSS&quot;.<br>
Make sure to set the current time based on UTC into the request you sent is sent to prevent replay attack, otherwise the request will be rejected due to timestamp validation which has a tolerance of 5 minutes based on PGW&#x27;s system time.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#credit-card-transaction-process-through-payment-system" class="table-of-contents__link toc-highlight">Credit card transaction process through Payment System</a></li><li><a href="#card-payment-api-list" class="table-of-contents__link toc-highlight">Card Payment API List</a></li><li><a href="#types-of-payment-status" class="table-of-contents__link toc-highlight">Types of payment status</a></li><li><a href="#payment-status-transition-flow" class="table-of-contents__link toc-highlight">Payment status transition Flow</a></li><li><a href="#result-types-of-api-calls" class="table-of-contents__link toc-highlight">Result Types of API calls</a></li><li><a href="#authentication-key-when-you-call-our-apis" class="table-of-contents__link toc-highlight">Authentication Key when you call our APIs</a></li><li><a href="#error-code" class="table-of-contents__link toc-highlight">Error code</a><ul><li><a href="#error-code-mapping" class="table-of-contents__link toc-highlight">Error code mapping</a></li><li><a href="#mapping-the-error-codes-and-pre-api-call-payment-status" class="table-of-contents__link toc-highlight">Mapping the error codes and pre-API call payment status</a></li></ul></li><li><a href="#payment-processing-for-credit-card-payments" class="table-of-contents__link toc-highlight">Payment Processing for credit card payments</a></li><li><a href="#how-to-create-signature" class="table-of-contents__link toc-highlight">How to create signature</a></li><li><a href="#how-to-encrypt-card-information" class="table-of-contents__link toc-highlight">How to encrypt card information</a></li><li><a href="#restriction" class="table-of-contents__link toc-highlight">Restriction</a><ul><li><a href="#sending-time" class="table-of-contents__link toc-highlight">Sending Time</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Rakuten Group</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://privacy.rakuten.co.jp/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/support/terms-of-use/">Terms of Use</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Rakuten Group Inc.</div></div></div></footer></div>
</body>
</html>